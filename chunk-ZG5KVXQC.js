import{a as F,b as $,d as yn,f as S,j as _}from"./chunk-RZZ4GCVR.js";var ot=S((Na,vn)=>{"use strict";vn.exports=class mn{constructor(t,n=new Map,r=0){this.prefix=t,this._existing=n,this.counter=r}clone(){let{prefix:t,_existing:n,counter:r}=this;return new mn(t,new Map(n),r)}getId(t){let n=t&&this._existing.get(t);if(n)return n;let r=this.prefix+this.counter;return this.counter++,t&&this._existing.set(t,r),r}hasId(t){return this._existing.has(t)}getOldIds(){return[...this._existing.keys()]}}});var wn=S(bn=>{"use strict";(function(e,t){"use strict";if(e.setImmediate)return;var n=1,r={},s=!1,a=e.document,i;function o(v){typeof v!="function"&&(v=new Function(""+v));for(var b=new Array(arguments.length-1),x=0;x<b.length;x++)b[x]=arguments[x+1];var w={callback:v,args:b};return r[n]=w,i(n),n++}function u(v){delete r[v]}function d(v){var b=v.callback,x=v.args;switch(x.length){case 0:b();break;case 1:b(x[0]);break;case 2:b(x[0],x[1]);break;case 3:b(x[0],x[1],x[2]);break;default:b.apply(t,x);break}}function g(v){if(s)setTimeout(g,0,v);else{var b=r[v];if(b){s=!0;try{d(b)}finally{u(v),s=!1}}}}function p(){i=function(v){process.nextTick(function(){g(v)})}}function y(){if(e.postMessage&&!e.importScripts){var v=!0,b=e.onmessage;return e.onmessage=function(){v=!1},e.postMessage("","*"),e.onmessage=b,v}}function l(){var v="setImmediate$"+Math.random()+"$",b=function(x){x.source===e&&typeof x.data=="string"&&x.data.indexOf(v)===0&&g(+x.data.slice(v.length))};e.addEventListener?e.addEventListener("message",b,!1):e.attachEvent("onmessage",b),i=function(x){e.postMessage(v+x,"*")}}function c(){var v=new MessageChannel;v.port1.onmessage=function(b){var x=b.data;g(x)},i=function(b){v.port2.postMessage(b)}}function f(){var v=a.documentElement;i=function(b){var x=a.createElement("script");x.onreadystatechange=function(){g(b),x.onreadystatechange=null,v.removeChild(x),x=null},v.appendChild(x)}}function m(){i=function(v){setTimeout(g,0,v)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,{}.toString.call(e.process)==="[object process]"?p():y()?l():e.MessageChannel?c():a&&"onreadystatechange"in a.createElement("script")?f():m(),h.setImmediate=o,h.clearImmediate=u})(typeof self>"u"?typeof global>"u"?bn:global:self)});var Xe=S((Sa,xn)=>{"use strict";wn();var Dt=self.crypto||self.msCrypto;xn.exports=class{constructor(t){if(!(Dt&&Dt.subtle))throw new Error("crypto.subtle not found.");if(t==="sha256")this.algorithm={name:"SHA-256"};else if(t==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${t}".`);this._content=""}update(t){this._content+=t}digest(){return _(this,null,function*(){let t=new TextEncoder().encode(this._content),n=new Uint8Array(yield Dt.subtle.digest(this.algorithm,t)),r="";for(let s=0;s<n.length;++s)r+=n[s].toString(16).padStart(2,"0");return r})}}});var Ot=S((La,In)=>{"use strict";In.exports=class{constructor(t){this.current=t.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<t.length;++n)this.dir.set(t[n],!0)}hasNext(){return!this.done}next(){let{current:t,dir:n}=this,r=t.slice(),s=null,a=0,i=t.length;for(let o=0;o<i;++o){let u=t[o],d=n.get(u);(s===null||u>s)&&(d&&o>0&&u>t[o-1]||!d&&o<i-1&&u>t[o+1])&&(s=u,a=o)}if(s===null)this.done=!0;else{let o=n.get(s)?a-1:a+1;t[a]=t[o],t[o]=s;for(let u of t)u>s&&n.set(u,!n.get(u))}return r}}});var ut=S((Ra,Nn)=>{"use strict";var Ii="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Lt=Ii+"langString",Rt="http://www.w3.org/2001/XMLSchema#string",ae="NamedNode",Se="BlankNode",lt="Literal",En="DefaultGraph",He={};(()=>{let e="(?:<([^:]+:[^>]*)>)",n="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",r=n+"0-9-\xB7\u0300-\u036F\u203F-\u2040",a="(_:(?:["+n+"0-9])(?:(?:["+r+".])*(?:["+r+"]))?)",i='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',o="(?:\\^\\^"+e+")",d="(?:"+i+"(?:"+o+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",g="[ \\t]+",p="[ \\t]*",y="(?:"+e+"|"+a+")"+g,l=e+g,c="(?:"+e+"|"+a+"|"+d+")"+p,f="(?:\\.|(?:(?:"+e+"|"+a+")"+p+"\\.))";He.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,He.empty=new RegExp("^"+p+"$"),He.quad=new RegExp("^"+p+y+l+c+f+p+"$")})();Nn.exports=class ct{static parse(t){let n=[],r={},s=t.split(He.eoln),a=0;for(let i of s){if(a++,He.empty.test(i))continue;let o=i.match(He.quad);if(o===null)throw new Error("N-Quads parse error on line "+a+".");let u={subject:null,predicate:null,object:null,graph:null};if(o[1]!==void 0?u.subject={termType:ae,value:o[1]}:u.subject={termType:Se,value:o[2]},u.predicate={termType:ae,value:o[3]},o[4]!==void 0?u.object={termType:ae,value:o[4]}:o[5]!==void 0?u.object={termType:Se,value:o[5]}:(u.object={termType:lt,value:void 0,datatype:{termType:ae}},o[7]!==void 0?u.object.datatype.value=o[7]:o[8]!==void 0?(u.object.datatype.value=Lt,u.object.language=o[8]):u.object.datatype.value=Rt,u.object.value=Si(o[6])),o[9]!==void 0?u.graph={termType:ae,value:o[9]}:o[10]!==void 0?u.graph={termType:Se,value:o[10]}:u.graph={termType:En,value:""},!(u.graph.value in r))r[u.graph.value]=[u],n.push(u);else{let d=!0,g=r[u.graph.value];for(let p of g)if(Ei(p,u)){d=!1;break}d&&(g.push(u),n.push(u))}}return n}static serialize(t){Array.isArray(t)||(t=ct.legacyDatasetToQuads(t));let n=[];for(let r of t)n.push(ct.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(t,n,r,s){let a="";return t.termType===ae?a+=`<${t.value}>`:a+=`${t.value}`,a+=` <${n.value}> `,r.termType===ae?a+=`<${r.value}>`:r.termType===Se?a+=r.value:(a+=`"${_i(r.value)}"`,r.datatype.value===Lt?r.language&&(a+=`@${r.language}`):r.datatype.value!==Rt&&(a+=`^^<${r.datatype.value}>`)),s.termType===ae?a+=` <${s.value}>`:s.termType===Se&&(a+=` ${s.value}`),a+=` .
`,a}static serializeQuad(t){return ct.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(t){let n=[],r={"blank node":Se,IRI:ae,literal:lt};for(let s in t)t[s].forEach(i=>{let o={};for(let u in i){let d=i[u],g={termType:r[d.type],value:d.value};g.termType===lt&&(g.datatype={termType:ae},"datatype"in d&&(g.datatype.value=d.datatype),"language"in d?("datatype"in d||(g.datatype.value=Lt),g.language=d.language):"datatype"in d||(g.datatype.value=Rt)),o[u]=g}s==="@default"?o.graph={termType:En,value:""}:o.graph={termType:s.startsWith("_:")?Se:ae,value:s},n.push(o)});return n}};function Ei(e,t){return!(e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType)||!(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value)?!1:e.object.termType!==lt?!0:e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value}var Ni=/["\\\n\r]/g;function _i(e){return e.replace(Ni,function(t){switch(t){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}var ji=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function Si(e){return e.replace(ji,function(t,n,r,s){if(n)switch(n){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(s)throw new Error("Unsupported U escape")})}});var At=S((Ta,Sn)=>{"use strict";var _n=ot(),Di=Xe(),Oi=Ot(),jn=ut();Sn.exports=class{constructor({createMessageDigest:t=()=>new Di("sha256"),canonicalIdMap:n=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new _n("_:c14n",n),this.createMessageDigest=t,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}main(t){return _(this,null,function*(){this.deepIterations=new Map,this.quads=t;for(let u of t)this._addBlankNodeQuadInfo({quad:u,component:u.subject}),this._addBlankNodeQuadInfo({quad:u,component:u.object}),this._addBlankNodeQuadInfo({quad:u,component:u.graph});let n=new Map,r=[...this.blankNodeInfo.keys()],s=0;for(let u of r)++s%100===0&&(yield this._yield()),yield this._hashAndTrackBlankNode({id:u,hashToBlankNodes:n});let a=[...n.keys()].sort(),i=[];for(let u of a){let d=n.get(u);if(d.length>1){i.push(d);continue}let g=d[0];this.canonicalIssuer.getId(g)}for(let u of i){let d=[];for(let g of u){if(this.canonicalIssuer.hasId(g))continue;let p=new _n("_:b");p.getId(g);let y=yield this.hashNDegreeQuads(g,p);d.push(y)}d.sort(Li);for(let g of d){let p=g.issuer.getOldIds();for(let y of p)this.canonicalIssuer.getId(y)}}let o=[];for(let u of this.quads){let d=jn.serializeQuadComponents(this._componentWithCanonicalId(u.subject),u.predicate,this._componentWithCanonicalId(u.object),this._componentWithCanonicalId(u.graph));o.push(d)}return o.sort(),o.join("")})}hashFirstDegreeQuads(t){return _(this,null,function*(){let n=[],r=this.blankNodeInfo.get(t),s=r.quads;for(let i of s){let o={subject:null,predicate:i.predicate,object:null,graph:null};o.subject=this.modifyFirstDegreeComponent(t,i.subject,"subject"),o.object=this.modifyFirstDegreeComponent(t,i.object,"object"),o.graph=this.modifyFirstDegreeComponent(t,i.graph,"graph"),n.push(jn.serializeQuad(o))}n.sort();let a=this.createMessageDigest();for(let i of n)a.update(i);return r.hash=yield a.digest(),r.hash})}hashRelatedBlankNode(t,n,r,s){return _(this,null,function*(){let a;this.canonicalIssuer.hasId(t)?a=this.canonicalIssuer.getId(t):r.hasId(t)?a=r.getId(t):a=this.blankNodeInfo.get(t).hash;let i=this.createMessageDigest();return i.update(s),s!=="g"&&i.update(this.getRelatedPredicate(n)),i.update(a),i.digest()})}hashNDegreeQuads(t,n){return _(this,null,function*(){let r=this.deepIterations.get(t)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,r+1);let s=this.createMessageDigest(),a=yield this.createHashToRelated(t,n),i=[...a.keys()].sort();for(let o of i){s.update(o);let u="",d,g=new Oi(a.get(o)),p=0;for(;g.hasNext();){let y=g.next();++p%3===0&&(yield this._yield());let l=n.clone(),c="",f=[],m=!1;for(let h of y)if(this.canonicalIssuer.hasId(h)?c+=this.canonicalIssuer.getId(h):(l.hasId(h)||f.push(h),c+=l.getId(h)),u.length!==0&&c>u){m=!0;break}if(!m){for(let h of f){let v=yield this.hashNDegreeQuads(h,l);if(c+=l.getId(h),c+=`<${v.hash}>`,l=v.issuer,u.length!==0&&c>u){m=!0;break}}m||(u.length===0||c<u)&&(u=c,d=l)}}s.update(u),n=d}return{hash:yield s.digest(),issuer:n}})}modifyFirstDegreeComponent(t,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}createHashToRelated(t,n){return _(this,null,function*(){let r=new Map,s=this.blankNodeInfo.get(t).quads,a=0;for(let i of s)++a%100===0&&(yield this._yield()),yield Promise.all([this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:t,issuer:n,hashToRelated:r})]);return r})}_hashAndTrackBlankNode(r){return _(this,arguments,function*({id:t,hashToBlankNodes:n}){let s=yield this.hashFirstDegreeQuads(t),a=n.get(s);a?a.push(t):n.set(s,[t])})}_addBlankNodeQuadInfo({quad:t,component:n}){if(n.termType!=="BlankNode")return;let r=n.value,s=this.blankNodeInfo.get(r);s?s.quads.add(t):this.blankNodeInfo.set(r,{quads:new Set([t]),hash:null})}_addRelatedBlankNodeHash(o){return _(this,arguments,function*({quad:t,component:n,position:r,id:s,issuer:a,hashToRelated:i}){if(!(n.termType==="BlankNode"&&n.value!==s))return;let u=n.value,d=yield this.hashRelatedBlankNode(u,t,a,r),g=i.get(d);g?g.push(u):i.set(d,[u])})}_componentWithCanonicalId(t){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}_yield(){return _(this,null,function*(){return new Promise(t=>setImmediate(t))})}};function Li(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}});var On=S((Ma,Dn)=>{"use strict";var Ri=Xe(),Ai=At();Dn.exports=class extends Ai{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Ri("sha1")}modifyFirstDegreeComponent(t,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}createHashToRelated(t,n){return _(this,null,function*(){let r=new Map,s=this.blankNodeInfo.get(t).quads,a=0;for(let i of s){let o,u;if(i.subject.termType==="BlankNode"&&i.subject.value!==t)u=i.subject.value,o="p";else if(i.object.termType==="BlankNode"&&i.object.value!==t)u=i.object.value,o="r";else continue;++a%100===0&&(yield this._yield());let d=yield this.hashRelatedBlankNode(u,i,n,o),g=r.get(d);g?g.push(u):r.set(d,[u])}return r})}}});var Tt=S((Ha,An)=>{"use strict";var Ln=ot(),Ti=Xe(),ki=Ot(),Rn=ut();An.exports=class{constructor({createMessageDigest:t=()=>new Ti("sha256"),canonicalIdMap:n=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Ln("_:c14n",n),this.createMessageDigest=t,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}main(t){this.deepIterations=new Map,this.quads=t;for(let o of t)this._addBlankNodeQuadInfo({quad:o,component:o.subject}),this._addBlankNodeQuadInfo({quad:o,component:o.object}),this._addBlankNodeQuadInfo({quad:o,component:o.graph});let n=new Map,r=[...this.blankNodeInfo.keys()];for(let o of r)this._hashAndTrackBlankNode({id:o,hashToBlankNodes:n});let s=[...n.keys()].sort(),a=[];for(let o of s){let u=n.get(o);if(u.length>1){a.push(u);continue}let d=u[0];this.canonicalIssuer.getId(d)}for(let o of a){let u=[];for(let d of o){if(this.canonicalIssuer.hasId(d))continue;let g=new Ln("_:b");g.getId(d);let p=this.hashNDegreeQuads(d,g);u.push(p)}u.sort(qi);for(let d of u){let g=d.issuer.getOldIds();for(let p of g)this.canonicalIssuer.getId(p)}}let i=[];for(let o of this.quads){let u=Rn.serializeQuadComponents(this._componentWithCanonicalId({component:o.subject}),o.predicate,this._componentWithCanonicalId({component:o.object}),this._componentWithCanonicalId({component:o.graph}));i.push(u)}return i.sort(),i.join("")}hashFirstDegreeQuads(t){let n=[],r=this.blankNodeInfo.get(t),s=r.quads;for(let i of s){let o={subject:null,predicate:i.predicate,object:null,graph:null};o.subject=this.modifyFirstDegreeComponent(t,i.subject,"subject"),o.object=this.modifyFirstDegreeComponent(t,i.object,"object"),o.graph=this.modifyFirstDegreeComponent(t,i.graph,"graph"),n.push(Rn.serializeQuad(o))}n.sort();let a=this.createMessageDigest();for(let i of n)a.update(i);return r.hash=a.digest(),r.hash}hashRelatedBlankNode(t,n,r,s){let a;this.canonicalIssuer.hasId(t)?a=this.canonicalIssuer.getId(t):r.hasId(t)?a=r.getId(t):a=this.blankNodeInfo.get(t).hash;let i=this.createMessageDigest();return i.update(s),s!=="g"&&i.update(this.getRelatedPredicate(n)),i.update(a),i.digest()}hashNDegreeQuads(t,n){let r=this.deepIterations.get(t)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,r+1);let s=this.createMessageDigest(),a=this.createHashToRelated(t,n),i=[...a.keys()].sort();for(let o of i){s.update(o);let u="",d,g=new ki(a.get(o));for(;g.hasNext();){let p=g.next(),y=n.clone(),l="",c=[],f=!1;for(let m of p)if(this.canonicalIssuer.hasId(m)?l+=this.canonicalIssuer.getId(m):(y.hasId(m)||c.push(m),l+=y.getId(m)),u.length!==0&&l>u){f=!0;break}if(!f){for(let m of c){let h=this.hashNDegreeQuads(m,y);if(l+=y.getId(m),l+=`<${h.hash}>`,y=h.issuer,u.length!==0&&l>u){f=!0;break}}f||(u.length===0||l<u)&&(u=l,d=y)}}s.update(u),n=d}return{hash:s.digest(),issuer:n}}modifyFirstDegreeComponent(t,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}createHashToRelated(t,n){let r=new Map,s=this.blankNodeInfo.get(t).quads;for(let a of s)this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:t,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:t,issuer:n,hashToRelated:r});return r}_hashAndTrackBlankNode({id:t,hashToBlankNodes:n}){let r=this.hashFirstDegreeQuads(t),s=n.get(r);s?s.push(t):n.set(r,[t])}_addBlankNodeQuadInfo({quad:t,component:n}){if(n.termType!=="BlankNode")return;let r=n.value,s=this.blankNodeInfo.get(r);s?s.quads.add(t):this.blankNodeInfo.set(r,{quads:new Set([t]),hash:null})}_addRelatedBlankNodeHash({quad:t,component:n,position:r,id:s,issuer:a,hashToRelated:i}){if(!(n.termType==="BlankNode"&&n.value!==s))return;let o=n.value,u=this.hashRelatedBlankNode(o,t,a,r),d=i.get(u);d?d.push(o):i.set(u,[o])}_componentWithCanonicalId({component:t}){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}};function qi(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}});var kn=S((Pa,Tn)=>{"use strict";var Mi=Xe(),Ji=Tt();Tn.exports=class extends Ji{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Mi("sha1")}modifyFirstDegreeComponent(t,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}createHashToRelated(t,n){let r=new Map,s=this.blankNodeInfo.get(t).quads;for(let a of s){let i,o;if(a.subject.termType==="BlankNode"&&a.subject.value!==t)o=a.subject.value,i="p";else if(a.object.termType==="BlankNode"&&a.object.value!==t)o=a.object.value,i="r";else continue;let u=this.hashRelatedBlankNode(o,a,n,i),d=r.get(u);d?d.push(o):r.set(u,[o])}return r}}});var qn=S(()=>{"use strict"});var Jn=S(Oe=>{"use strict";var Fi=At(),Hi=On(),Bi=Tt(),Pi=kn(),De;try{De=qn()}catch{}function Mn(e){return Array.isArray(e)?e:Oe.NQuads.legacyDatasetToQuads(e)}Oe.NQuads=ut();Oe.IdentifierIssuer=ot();Oe._rdfCanonizeNative=function(e){return e&&(De=e),De};Oe.canonize=function(e,t){return _(this,null,function*(){let n=Mn(e,t);if(t.useNative){if(!De)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((r,s)=>De.canonize(n,t,(a,i)=>a?s(a):r(i)))}if(t.algorithm==="URDNA2015")return new Fi(t).main(n);if(t.algorithm==="URGNA2012"){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new Hi(t).main(n)}throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")})};Oe._canonizeSync=function(e,t){let n=Mn(e,t);if(t.useNative){if(!De)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return De.canonizeSync(n,t)}if(t.algorithm==="URDNA2015")return new Bi(t).main(n);if(t.algorithm==="URGNA2012"){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new Pi(t).main(n)}throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}});var dt=S((Xa,Fn)=>{"use strict";Fn.exports=Jn()});var z=S(($a,Hn)=>{"use strict";var ee={};Hn.exports=ee;ee.isArray=Array.isArray;ee.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]";ee.isDouble=e=>ee.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21);ee.isEmptyObject=e=>ee.isObject(e)&&Object.keys(e).length===0;ee.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]";ee.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e);ee.isObject=e=>Object.prototype.toString.call(e)==="[object Object]";ee.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]";ee.isUndefined=e=>typeof e>"u"});var ue=S((Qa,Bn)=>{"use strict";var Le=z(),ge={};Bn.exports=ge;ge.isSubject=e=>Le.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)?Object.keys(e).length>1||!("@id"in e):!1;ge.isSubjectReference=e=>Le.isObject(e)&&Object.keys(e).length===1&&"@id"in e;ge.isValue=e=>Le.isObject(e)&&"@value"in e;ge.isList=e=>Le.isObject(e)&&"@list"in e;ge.isGraph=e=>Le.isObject(e)&&"@graph"in e&&Object.keys(e).filter(t=>t!=="@id"&&t!=="@index").length===1;ge.isSimpleGraph=e=>ge.isGraph(e)&&!("@id"in e);ge.isBlankNode=e=>{if(Le.isObject(e)){if("@id"in e){let t=e["@id"];return!Le.isString(t)||t.indexOf("_:")===0}return Object.keys(e).length===0||!("@value"in e||"@set"in e||"@list"in e)}return!1}});var Q=S((Wa,Pn)=>{"use strict";Pn.exports=class extends Error{constructor(t="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(t),this.name=n,this.message=t,this.details=r}}});var K=S((Ya,Gn)=>{"use strict";var $e=ue(),H=z(),Vn=dt().IdentifierIssuer,Ui=Q(),Vi=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Gi=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,zi=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,Xi=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,$i=/^@[a-zA-Z]+$/,Un={headers:{accept:"application/ld+json, application/json"}},O={};Gn.exports=O;O.IdentifierIssuer=Vn;O.REGEX_BCP47=Vi;O.REGEX_KEYWORD=$i;O.clone=function(e){if(e&&typeof e=="object"){let t;if(H.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=O.clone(e[n])}else if(e instanceof Map){t=new Map;for(let[n,r]of e)t.set(n,O.clone(r))}else if(e instanceof Set){t=new Set;for(let n of e)t.add(O.clone(n))}else if(H.isObject(e)){t={};for(let n in e)t[n]=O.clone(e[n])}else t=e.toString();return t}return e};O.asArray=function(e){return Array.isArray(e)?e:[e]};O.buildHeaders=(e={})=>{if(Object.keys(e).some(n=>n.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+Un.headers.accept+'" is supported.');return Object.assign({Accept:Un.headers.accept},e)};O.parseLinkHeader=e=>{let t={},n=e.match(Gi);for(let r=0;r<n.length;++r){let s=n[r].match(zi);if(!s)continue;let a={target:s[1]},i=s[2];for(;s=Xi.exec(i);)a[s[1]]=s[2]===void 0?s[3]:s[2];let o=a.rel||"";Array.isArray(t[o])?t[o].push(a):t.hasOwnProperty(o)?t[o]=[t[o],a]:t[o]=a}return t};O.validateTypeValue=(e,t)=>{if(!H.isString(e)&&!(H.isArray(e)&&e.every(n=>H.isString(n)))){if(t&&H.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&O.asArray(e["@default"]).every(n=>H.isString(n)))return}throw new Ui('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}};O.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){let n=e[t];return!H.isArray(n)||n.length>0}return!1};O.hasValue=(e,t,n)=>{if(O.hasProperty(e,t)){let r=e[t],s=$e.isList(r);if(H.isArray(r)||s){s&&(r=r["@list"]);for(let a=0;a<r.length;++a)if(O.compareValues(n,r[a]))return!0}else if(!H.isArray(n))return O.compareValues(n,r)}return!1};O.addValue=(e,t,n,r)=>{if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(H.isArray(n)){n.length===0&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let s=0;s<n.length;++s)O.addValue(e,t,n[s],r)}else if(e.hasOwnProperty(t)){let s=!r.allowDuplicate&&O.hasValue(e,t,n);!H.isArray(e[t])&&(!s||r.propertyIsArray)&&(e[t]=[e[t]]),s||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n};O.getValues=(e,t)=>[].concat(e[t]||[]);O.removeProperty=(e,t)=>{delete e[t]};O.removeValue=(e,t,n,r)=>{r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);let s=O.getValues(e,t).filter(a=>!O.compareValues(a,n));s.length===0?O.removeProperty(e,t):s.length===1&&!r.propertyIsArray?e[t]=s[0]:e[t]=s};O.relabelBlankNodes=(e,t)=>{t=t||{};let n=t.issuer||new Vn("_:b");return ft(n,e)};O.compareValues=(e,t)=>e===t||$e.isValue(e)&&$e.isValue(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:H.isObject(e)&&"@id"in e&&H.isObject(t)&&"@id"in t?e["@id"]===t["@id"]:!1;O.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1;function ft(e,t){if(H.isArray(t))for(let n=0;n<t.length;++n)t[n]=ft(e,t[n]);else if($e.isList(t))t["@list"]=ft(e,t["@list"]);else if(H.isObject(t)){$e.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));let n=Object.keys(t).sort();for(let r=0;r<n.length;++r){let s=n[r];s!=="@id"&&(t[s]=ft(e,t[s]))}}return t}});var ht=S((Za,zn)=>{"use strict";var oe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Qe="http://www.w3.org/2001/XMLSchema#";zn.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:oe,RDF_LIST:oe+"List",RDF_FIRST:oe+"first",RDF_REST:oe+"rest",RDF_NIL:oe+"nil",RDF_TYPE:oe+"type",RDF_PLAIN_LITERAL:oe+"PlainLiteral",RDF_XML_LITERAL:oe+"XMLLiteral",RDF_JSON_LITERAL:oe+"JSON",RDF_OBJECT:oe+"object",RDF_LANGSTRING:oe+"langString",XSD:Qe,XSD_BOOLEAN:Qe+"boolean",XSD_DOUBLE:Qe+"double",XSD_INTEGER:Qe+"integer",XSD_STRING:Qe+"string"}});var kt=S((eo,Xn)=>{"use strict";Xn.exports=class{constructor(){this._requests={}}wrapLoader(t){let n=this;return n._loader=t,function(){return n.add.apply(n,arguments)}}add(t){return _(this,null,function*(){let n=this._requests[t];if(n)return Promise.resolve(n);n=this._requests[t]=this._loader(t);try{return yield n}finally{delete this._requests[t]}})}}});var ye=S((no,$n)=>{"use strict";var pt=z(),B={};$n.exports=B;B.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};B.parse=(e,t)=>{let n={},r=B.parsers[t||"full"],s=r.regex.exec(e),a=r.keys.length;for(;a--;)n[r.keys[a]]=s[a]===void 0?null:s[a];return(n.scheme==="https"&&n.port==="443"||n.scheme==="http"&&n.port==="80")&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=B.removeDotSegments(n.path),n};B.prependBase=(e,t)=>{if(e===null||B.isAbsolute(t))return t;(!e||pt.isString(e))&&(e=B.parse(e||""));let n=B.parse(t),r={protocol:e.protocol||""};if(n.authority!==null)r.authority=n.authority,r.path=n.path,r.query=n.query;else if(r.authority=e.authority,n.path==="")r.path=e.path,n.query!==null?r.query=n.query:r.query=e.query;else{if(n.path.indexOf("/")===0)r.path=n.path;else{let a=e.path;a=a.substr(0,a.lastIndexOf("/")+1),(a.length>0||e.authority)&&a.substr(-1)!=="/"&&(a+="/"),a+=n.path,r.path=a}r.query=n.query}n.path!==""&&(r.path=B.removeDotSegments(r.path));let s=r.protocol;return r.authority!==null&&(s+="//"+r.authority),s+=r.path,r.query!==null&&(s+="?"+r.query),n.fragment!==null&&(s+="#"+n.fragment),s===""&&(s="./"),s};B.removeBase=(e,t)=>{if(e===null)return t;(!e||pt.isString(e))&&(e=B.parse(e||""));let n="";if(e.href!==""?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),t.indexOf(n)!==0)return t;let r=B.parse(t.substr(n.length)),s=e.normalizedPath.split("/"),a=r.normalizedPath.split("/"),i=r.fragment||r.query?0:1;for(;s.length>0&&a.length>i&&s[0]===a[0];)s.shift(),a.shift();let o="";if(s.length>0){s.pop();for(let u=0;u<s.length;++u)o+="../"}return o+=a.join("/"),r.query!==null&&(o+="?"+r.query),r.fragment!==null&&(o+="#"+r.fragment),o===""&&(o="./"),o};B.removeDotSegments=e=>{if(e.length===0)return"";let t=e.split("/"),n=[];for(;t.length>0;){let r=t.shift(),s=t.length===0;if(r==="."){s&&n.push("");continue}if(r===".."){n.pop(),s&&n.push("");continue}n.push(r)}return e[0]==="/"&&n.length>0&&n[0]!==""&&n.unshift(""),n.length===1&&n[0]===""?"/":n.join("/")};var Qi=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;B.isAbsolute=e=>pt.isString(e)&&Qi.test(e);B.isRelative=e=>pt.isString(e)});var Kn=S((ro,Qn)=>{"use strict";var{parseLinkHeader:Ki,buildHeaders:Wi}=K(),{LINK_HEADER_CONTEXT:Yi}=ht(),Ke=Q(),Zi=kt(),{prependBase:Ci}=ye(),es=/(^|(\r\n))link:/i;Qn.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{return t=Wi(t),new Zi().wrapLoader(s);function s(a){return _(this,null,function*(){if(a.indexOf("http:")!==0&&a.indexOf("https:")!==0)throw new Ke('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&a.indexOf("https")!==0)throw new Ke(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:a});let i;try{i=yield ts(n,a,t)}catch(p){throw new Ke("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:p})}if(i.status>=400)throw new Ke("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:a,httpStatusCode:i.status});let o={contextUrl:null,documentUrl:a,document:i.response},u=null,d=i.getResponseHeader("Content-Type"),g;if(es.test(i.getAllResponseHeaders())&&(g=i.getResponseHeader("Link")),g&&d!=="application/ld+json"){let p=Ki(g),y=p[Yi];if(Array.isArray(y))throw new Ke("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});y&&(o.contextUrl=y.target),u=p.alternate,u&&u.type=="application/ld+json"&&!(d||"").match(/^application\/(\w*\+)?json$/)&&(o=yield s(Ci(a,u.target)))}return o})}};function ts(e,t,n){e=e||XMLHttpRequest;let r=new e;return new Promise((s,a)=>{r.onload=()=>s(r),r.onerror=i=>a(i),r.open("GET",t,!0);for(let i in n)r.setRequestHeader(i,n[i]);r.send()})}});var Yn=S((so,Wn)=>{"use strict";var ns=Kn(),qt={};Wn.exports=qt;qt.setupDocumentLoaders=function(e){typeof XMLHttpRequest<"u"&&(e.documentLoaders.xhr=ns,e.useDocumentLoader("xhr"))};qt.setupGlobals=function(e){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}});var Cn=S((ao,Zn)=>{"use strict";Zn.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var tr=S((oo,er)=>{"use strict";er.exports=D;D.Node=Re;D.create=D;function D(e){var t=this;if(t instanceof D||(t=new D),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}D.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};D.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};D.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};D.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)is(this,arguments[e]);return this.length};D.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ss(this,arguments[e]);return this.length};D.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};D.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};D.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};D.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};D.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};D.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};D.prototype.map=function(e,t){t=t||this;for(var n=new D,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};D.prototype.mapReverse=function(e,t){t=t||this;for(var n=new D,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};D.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;r!==null;s++)n=e(n,r.value,s),r=r.next;return n};D.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;r!==null;s--)n=e(n,r.value,s),r=r.prev;return n};D.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};D.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};D.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new D;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,s=this.head;s!==null&&r<e;r++)s=s.next;for(;s!==null&&r<t;r++,s=s.next)n.push(s.value);return n};D.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new D;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,s=this.tail;s!==null&&r>t;r--)s=s.prev;for(;s!==null&&r>e;r--,s=s.prev)n.push(s.value);return n};D.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,s=this.head;s!==null&&r<e;r++)s=s.next;for(var a=[],r=0;s&&r<t;r++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var r=0;r<n.length;r++)s=rs(this,s,n[r]);return a};D.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function rs(e,t,n){var r=t===e.head?new Re(n,null,t,e):new Re(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function is(e,t){e.tail=new Re(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ss(e,t){e.head=new Re(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Re(e,t,n,r){if(!(this instanceof Re))return new Re(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Cn()(D)}catch{}});var Bt=S((lo,sr)=>{"use strict";var as=tr(),Ae=Symbol("max"),ve=Symbol("length"),Be=Symbol("lengthCalculator"),Ye=Symbol("allowStale"),Te=Symbol("maxAge"),me=Symbol("dispose"),nr=Symbol("noDisposeOnSet"),M=Symbol("lruList"),le=Symbol("cache"),ir=Symbol("updateAgeOnGet"),Mt=()=>1,Ft=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let n=this[Ae]=t.max||1/0,r=t.length||Mt;if(this[Be]=typeof r!="function"?Mt:r,this[Ye]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Te]=t.maxAge||0,this[me]=t.dispose,this[nr]=t.noDisposeOnSet||!1,this[ir]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Ae]=t||1/0,We(this)}get max(){return this[Ae]}set allowStale(t){this[Ye]=!!t}get allowStale(){return this[Ye]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Te]=t,We(this)}get maxAge(){return this[Te]}set lengthCalculator(t){typeof t!="function"&&(t=Mt),t!==this[Be]&&(this[Be]=t,this[ve]=0,this[M].forEach(n=>{n.length=this[Be](n.value,n.key),this[ve]+=n.length})),We(this)}get lengthCalculator(){return this[Be]}get length(){return this[ve]}get itemCount(){return this[M].length}rforEach(t,n){n=n||this;for(let r=this[M].tail;r!==null;){let s=r.prev;rr(this,t,r,n),r=s}}forEach(t,n){n=n||this;for(let r=this[M].head;r!==null;){let s=r.next;rr(this,t,r,n),r=s}}keys(){return this[M].toArray().map(t=>t.key)}values(){return this[M].toArray().map(t=>t.value)}reset(){this[me]&&this[M]&&this[M].length&&this[M].forEach(t=>this[me](t.key,t.value)),this[le]=new Map,this[M]=new as,this[ve]=0}dump(){return this[M].map(t=>gt(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[M]}set(t,n,r){if(r=r||this[Te],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let s=r?Date.now():0,a=this[Be](n,t);if(this[le].has(t)){if(a>this[Ae])return Pe(this,this[le].get(t)),!1;let u=this[le].get(t).value;return this[me]&&(this[nr]||this[me](t,u.value)),u.now=s,u.maxAge=r,u.value=n,this[ve]+=a-u.length,u.length=a,this.get(t),We(this),!0}let i=new Ht(t,n,a,s,r);return i.length>this[Ae]?(this[me]&&this[me](t,n),!1):(this[ve]+=i.length,this[M].unshift(i),this[le].set(t,this[M].head),We(this),!0)}has(t){if(!this[le].has(t))return!1;let n=this[le].get(t).value;return!gt(this,n)}get(t){return Jt(this,t,!0)}peek(t){return Jt(this,t,!1)}pop(){let t=this[M].tail;return t?(Pe(this,t),t.value):null}del(t){Pe(this,this[le].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let s=t[r],a=s.e||0;if(a===0)this.set(s.k,s.v);else{let i=a-n;i>0&&this.set(s.k,s.v,i)}}}prune(){this[le].forEach((t,n)=>Jt(this,n,!1))}},Jt=(e,t,n)=>{let r=e[le].get(t);if(r){let s=r.value;if(gt(e,s)){if(Pe(e,r),!e[Ye])return}else n&&(e[ir]&&(r.value.now=Date.now()),e[M].unshiftNode(r));return s.value}},gt=(e,t)=>{if(!t||!t.maxAge&&!e[Te])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Te]&&n>e[Te]},We=e=>{if(e[ve]>e[Ae])for(let t=e[M].tail;e[ve]>e[Ae]&&t!==null;){let n=t.prev;Pe(e,t),t=n}},Pe=(e,t)=>{if(t){let n=t.value;e[me]&&e[me](n.key,n.value),e[ve]-=n.length,e[le].delete(n.key),e[M].removeNode(t)}},Ht=class{constructor(t,n,r,s,a){this.key=t,this.value=n,this.length=r,this.now=s,this.maxAge=a||0}},rr=(e,t,n,r)=>{let s=n.value;gt(e,s)&&(Pe(e,n),e[Ye]||(s=void 0)),s&&t.call(r,s.value,s.key,e)};sr.exports=Ft});var or=S((uo,ar)=>{"use strict";var os=Bt(),ls=10;ar.exports=class{constructor({document:t}){this.document=t,this.cache=new os({max:ls})}getProcessed(t){return this.cache.get(t)}setProcessed(t,n){this.cache.set(t,n)}}});var dr=S((ho,ur)=>{"use strict";var{isArray:Pt,isObject:Ce,isString:yt}=z(),{asArray:cs}=K(),{prependBase:Ut}=ye(),Ze=Q(),lr=or(),cr=10;ur.exports=class{constructor({sharedCache:t}){this.perOpCache=new Map,this.sharedCache=t}resolve(i){return _(this,arguments,function*({activeCtx:t,context:n,documentLoader:r,base:s,cycles:a=new Set}){n&&Ce(n)&&n["@context"]&&(n=n["@context"]),n=cs(n);let o=[];for(let u of n){if(yt(u)){let p=this._get(u);p||(p=yield this._resolveRemoteContext({activeCtx:t,url:u,documentLoader:r,base:s,cycles:a})),Pt(p)?o.push(...p):o.push(p);continue}if(u===null){o.push(new lr({document:null}));continue}Ce(u)||us(n);let d=JSON.stringify(u),g=this._get(d);g||(g=new lr({document:u}),this._cacheResolvedContext({key:d,resolved:g,tag:"static"})),o.push(g)}return o})}_get(t){let n=this.perOpCache.get(t);if(!n){let r=this.sharedCache.get(t);r&&(n=r.get("static"),n&&this.perOpCache.set(t,n))}return n}_cacheResolvedContext({key:t,resolved:n,tag:r}){if(this.perOpCache.set(t,n),r!==void 0){let s=this.sharedCache.get(t);s||(s=new Map,this.sharedCache.set(t,s)),s.set(r,n)}return n}_resolveRemoteContext(i){return _(this,arguments,function*({activeCtx:t,url:n,documentLoader:r,base:s,cycles:a}){n=Ut(s,n);let{context:o,remoteDoc:u}=yield this._fetchContext({activeCtx:t,url:n,documentLoader:r,cycles:a});s=u.documentUrl||n,Vt({context:o,base:s});let d=yield this.resolve({activeCtx:t,context:o,documentLoader:r,base:s,cycles:a});return this._cacheResolvedContext({key:n,resolved:d,tag:u.tag}),d})}_fetchContext(a){return _(this,arguments,function*({activeCtx:t,url:n,documentLoader:r,cycles:s}){if(s.size>cr)throw new Ze("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:cr});if(s.has(n))throw new Ze("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:n});s.add(n);let i,o;try{o=yield r(n),i=o.document||null,yt(i)&&(i=JSON.parse(i))}catch(u){throw new Ze("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:n,cause:u})}if(!Ce(i))throw new Ze("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:n});return"@context"in i?i={"@context":i["@context"]}:i={"@context":{}},o.contextUrl&&(Pt(i["@context"])||(i["@context"]=[i["@context"]]),i["@context"].push(o.contextUrl)),{context:i,remoteDoc:o}})}};function us(e){throw new Ze("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function Vt({context:e,base:t}){if(!e)return;let n=e["@context"];if(yt(n)){e["@context"]=Ut(t,n);return}if(Pt(n)){for(let r=0;r<n.length;++r){let s=n[r];if(yt(s)){n[r]=Ut(t,s);continue}Ce(s)&&Vt({context:{"@context":s},base:t})}return}if(Ce(n))for(let r in n)Vt({context:n[r],base:t})}});var hr=S((go,fr)=>{"use strict";fr.exports=dt().NQuads});var Ue=S((yo,yr)=>{"use strict";var Gt=Q(),{isArray:ds}=z(),{asArray:pr}=K(),W={};yr.exports=W;W.defaultEventHandler=null;W.setupEventHandler=({options:e={}})=>{let t=[].concat(e.safe?W.safeEventHandler:[],e.eventHandler?pr(e.eventHandler):[],W.defaultEventHandler?W.defaultEventHandler:[]);return t.length===0?null:t};W.handleEvent=({event:e,options:t})=>{gr({event:e,handlers:t.eventHandler})};function gr({event:e,handlers:t}){let n=!0;for(let r=0;n&&r<t.length;++r){n=!1;let s=t[r];if(ds(s))n=gr({event:e,handlers:s});else if(typeof s=="function")s({event:e,next:()=>{n=!0}});else if(typeof s=="object")e.code in s?s[e.code]({event:e,next:()=>{n=!0}}):n=!0;else throw new Gt("Invalid event handler.","jsonld.InvalidEventHandler",{event:e})}return n}var fs=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);W.safeEventHandler=function({event:t,next:n}){if(t.level==="warning"&&fs.has(t.code))throw new Gt("Safe mode validation error.","jsonld.ValidationError",{event:t});n()};W.logEventHandler=function({event:t,next:n}){console.log(`EVENT: ${t.message}`,{event:t}),n()};W.logWarningEventHandler=function({event:t,next:n}){t.level==="warning"&&console.warn(`WARNING: ${t.message}`,{event:t}),n()};W.unhandledEventHandler=function({event:t}){throw new Gt("No handler for event.","jsonld.UnhandledEvent",{event:t})};W.setDefaultEventHandler=function({eventHandler:e}={}){W.defaultEventHandler=e?pr(e):null}});var Ie=S((wr,xr)=>{"use strict";var mr=K(),N=Q(),{isArray:vr,isObject:xe,isString:X,isUndefined:hs}=z(),{isAbsolute:ke,isRelative:ps,prependBase:et}=ye(),{handleEvent:Ge}=Ue(),{REGEX_BCP47:gs,REGEX_KEYWORD:vt,asArray:br,compareShortestLeast:ys}=K(),mt=new Map,ms=1e4,T={};xr.exports=T;T.process=i=>_(wr,[i],function*({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:s=!1,cycles:a=new Set}){if(xe(t)&&"@context"in t&&vr(t["@context"])&&(t=t["@context"]),br(t).length===0)return e;let u=[],d=[({event:l,next:c})=>{u.push(l),c()}];n.eventHandler&&d.push(n.eventHandler);let g=n;n=$(F({},n),{eventHandler:d});let p=yield n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});xe(p[0].document)&&typeof p[0].document["@propagate"]=="boolean"&&(r=p[0].document["@propagate"]);let y=e;!r&&!y.previousContext&&(y=y.clone(),y.previousContext=e);for(let l of p){let{document:c}=l;if(e=y,c===null){if(!s&&Object.keys(e.protected).length!==0)throw new N("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});y=e=T.getInitialContext(n).clone();continue}let f=l.getProcessed(e);if(f){if(g.eventHandler)for(let h of f.events)Ge({event:h,options:g});y=e=f.context;continue}if(xe(c)&&"@context"in c&&(c=c["@context"]),!xe(c))throw new N("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c});y=y.clone();let m=new Map;if("@version"in c){if(c["@version"]!==1.1)throw new N("Unsupported JSON-LD version: "+c["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:c});if(e.processingMode&&e.processingMode==="json-ld-1.0")throw new N("@version: "+c["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:c});y.processingMode="json-ld-1.1",y["@version"]=c["@version"],m.set("@version",!0)}if(y.processingMode=y.processingMode||e.processingMode,"@base"in c){let h=c["@base"];if(!(h===null||ke(h)))if(ps(h))h=et(y["@base"],h);else throw new N('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:c});y["@base"]=h,m.set("@base",!0)}if("@vocab"in c){let h=c["@vocab"];if(h===null)delete y["@vocab"];else if(X(h)){if(!ke(h)&&T.processingMode(y,1))throw new N('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});{let v=Ve(y,h,{vocab:!0,base:!0},void 0,void 0,n);ke(v)||n.eventHandler&&Ge({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:v}},options:n}),y["@vocab"]=v}}else throw new N('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});m.set("@vocab",!0)}if("@language"in c){let h=c["@language"];if(h===null)delete y["@language"];else if(X(h))h.match(gs)||n.eventHandler&&Ge({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:h}},options:n}),y["@language"]=h.toLowerCase();else throw new N('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:c});m.set("@language",!0)}if("@direction"in c){let h=c["@direction"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:c});if(h===null)delete y["@direction"];else{if(h!=="ltr"&&h!=="rtl")throw new N('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:c});y["@direction"]=h}m.set("@direction",!0)}if("@propagate"in c){let h=c["@propagate"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:c});if(typeof h!="boolean")throw new N("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});m.set("@propagate",!0)}if("@import"in c){let h=c["@import"];if(e.processingMode==="json-ld-1.0")throw new N("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:c});if(!X(h))throw new N("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});let v=yield n.contextResolver.resolve({activeCtx:e,context:h,documentLoader:n.documentLoader,base:n.base});if(v.length!==1)throw new N("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});let b=v[0].getProcessed(e);if(b)c=b;else{let x=v[0].document;if("@import"in x)throw new N("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(let w in x)c.hasOwnProperty(w)||(c[w]=x[w]);v[0].setProcessed(e,c)}m.set("@import",!0)}m.set("@protected",c["@protected"]||!1);for(let h in c)if(T.createTermDefinition({activeCtx:y,localCtx:c,term:h,defined:m,options:n,overrideProtected:s}),xe(c[h])&&"@context"in c[h]){let v=c[h]["@context"],b=!0;if(X(v)){let x=et(n.base,v);a.has(x)?b=!1:a.add(x)}if(b)try{yield T.process({activeCtx:y.clone(),localCtx:c[h]["@context"],overrideProtected:!0,options:n,cycles:a})}catch{throw new N("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:c[h]["@context"],term:h})}}l.setProcessed(e,{context:y,events:u})}return y});T.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:s,overrideProtected:a=!1})=>{if(r.has(n)){if(r.get(n))return;throw new N("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}r.set(n,!1);let i;if(t.hasOwnProperty(n)&&(i=t[n]),n==="@type"&&xe(i)&&(i["@container"]||"@set")==="@set"&&T.processingMode(e,1.1)){let l=["@container","@id","@protected"],c=Object.keys(i);if(c.length===0||c.some(f=>!l.includes(f)))throw new N("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(T.isKeyword(n))throw new N("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(vt)){s.eventHandler&&Ge({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:n}},options:s});return}else if(n==="")throw new N("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}let o=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let u=!1;if((X(i)||i===null)&&(u=!0,i={"@id":i}),!xe(i))throw new N("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});let d={};e.mappings.set(n,d),d.reverse=!1;let g=["@container","@id","@language","@reverse","@type"];T.processingMode(e,1.1)&&g.push("@context","@direction","@index","@nest","@prefix","@protected");for(let l in i)if(!g.includes(l))throw new N("Invalid JSON-LD syntax; a term definition must not contain "+l,"jsonld.SyntaxError",{code:"invalid term definition",context:t});let p=n.indexOf(":");if(d._termHasColon=p>0,"@reverse"in i){if("@id"in i)throw new N("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in i)throw new N("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});let l=i["@reverse"];if(!X(l))throw new N("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(l.match(vt)){s.eventHandler&&Ge({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:l}},options:s}),o?e.mappings.set(n,o):e.mappings.delete(n);return}let c=Ve(e,l,{vocab:!0,base:!1},t,r,s);if(!ke(c))throw new N("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});d["@id"]=c,d.reverse=!0}else if("@id"in i){let l=i["@id"];if(l&&!X(l))throw new N("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(l===null)d["@id"]=null;else if(!T.isKeyword(l)&&l.match(vt)){s.eventHandler&&Ge({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:l}},options:s}),o?e.mappings.set(n,o):e.mappings.delete(n);return}else if(l!==n){if(l=Ve(e,l,{vocab:!0,base:!1},t,r,s),!ke(l)&&!T.isKeyword(l))throw new N("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){let c=new Map(r).set(n,!0);if(Ve(e,n,{vocab:!0,base:!1},t,c,s)!==l)throw new N("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}d["@id"]=l,d._prefix=u&&!d._termHasColon&&l.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in d))if(d._termHasColon){let l=n.substr(0,p);if(t.hasOwnProperty(l)&&T.createTermDefinition({activeCtx:e,localCtx:t,term:l,defined:r,options:s}),e.mappings.has(l)){let c=n.substr(p+1);d["@id"]=e.mappings.get(l)["@id"]+c}else d["@id"]=n}else if(n==="@type")d["@id"]=n;else{if(!("@vocab"in e))throw new N("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});d["@id"]=e["@vocab"]+n}if((i["@protected"]===!0||r.get("@protected")===!0&&i["@protected"]!==!1)&&(e.protected[n]=!0,d.protected=!0),r.set(n,!0),"@type"in i){let l=i["@type"];if(!X(l))throw new N("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(l==="@json"||l==="@none"){if(T.processingMode(e,1))throw new N(`Invalid JSON-LD syntax; an @context @type value must not be "${l}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if(l!=="@id"&&l!=="@vocab"){if(l=Ve(e,l,{vocab:!0,base:!1},t,r,s),!ke(l))throw new N("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(l.indexOf("_:")===0)throw new N("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}d["@type"]=l}if("@container"in i){let l=X(i["@container"])?[i["@container"]]:i["@container"]||[],c=["@list","@set","@index","@language"],f=!0,m=l.includes("@set");if(T.processingMode(e,1.1)){if(c.push("@graph","@id","@type"),l.includes("@list")){if(l.length!==1)throw new N("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(l.includes("@graph")){if(l.some(h=>h!=="@graph"&&h!=="@id"&&h!=="@index"&&h!=="@set"))throw new N("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else f&=l.length<=(m?2:1);if(l.includes("@type")&&(d["@type"]=d["@type"]||"@id",!["@id","@vocab"].includes(d["@type"])))throw new N("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else f&=!vr(i["@container"]),f&=l.length<=1;if(f&=l.every(h=>c.includes(h)),f&=!(m&&l.includes("@list")),!f)throw new N("Invalid JSON-LD syntax; @context @container value must be one of the following: "+c.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(d.reverse&&!l.every(h=>["@index","@set"].includes(h)))throw new N("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});d["@container"]=l}if("@index"in i){if(!("@container"in i)||!d["@container"].includes("@index"))throw new N(`Invalid JSON-LD syntax; @index without @index in @container: "${i["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!X(i["@index"])||i["@index"].indexOf("@")===0)throw new N(`Invalid JSON-LD syntax; @index must expand to an IRI: "${i["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});d["@index"]=i["@index"]}if("@context"in i&&(d["@context"]=i["@context"]),"@language"in i&&!("@type"in i)){let l=i["@language"];if(l!==null&&!X(l))throw new N("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});l!==null&&(l=l.toLowerCase()),d["@language"]=l}if("@prefix"in i){if(n.match(/:|\//))throw new N("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(T.isKeyword(d["@id"]))throw new N("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(typeof i["@prefix"]=="boolean")d._prefix=i["@prefix"]===!0;else throw new N("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t})}if("@direction"in i){let l=i["@direction"];if(l!==null&&l!=="ltr"&&l!=="rtl")throw new N('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});d["@direction"]=l}if("@nest"in i){let l=i["@nest"];if(!X(l)||l!=="@nest"&&l.indexOf("@")===0)throw new N("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});d["@nest"]=l}let y=d["@id"];if(y==="@context"||y==="@preserve")throw new N("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(o&&o.protected&&!a&&(e.protected[n]=!0,d.protected=!0,!zt(o,d)))throw new N("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n})};T.expandIri=(e,t,n,r)=>Ve(e,t,n,void 0,void 0,r);function Ve(e,t,n,r,s,a){if(t===null||!X(t)||T.isKeyword(t))return t;if(t.match(vt))return null;if(r&&r.hasOwnProperty(t)&&s.get(t)!==!0&&T.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:s,options:a}),n=n||{},n.vocab){let o=e.mappings.get(t);if(o===null)return null;if(xe(o)&&"@id"in o)return o["@id"]}let i=t.indexOf(":");if(i>0){let o=t.substr(0,i),u=t.substr(i+1);if(o==="_"||u.indexOf("//")===0)return t;r&&r.hasOwnProperty(o)&&T.createTermDefinition({activeCtx:e,localCtx:r,term:o,defined:s,options:a});let d=e.mappings.get(o);if(d&&d._prefix)return d["@id"]+u;if(ke(t))return t}if(n.vocab&&"@vocab"in e)t=e["@vocab"]+t;else if(n.base){let o,u;"@base"in e?e["@base"]?(u=et(a.base,e["@base"]),o=et(u,t)):(u=e["@base"],o=t):(u=a.base,o=et(a.base,t)),t=o}return t}T.getInitialContext=e=>{let t=JSON.stringify({processingMode:e.processingMode}),n=mt.get(t);if(n)return n;let r={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:s,clone:o,revertToPreviousContext:u,protected:{}};return mt.size===ms&&mt.clear(),mt.set(t,r),r;function s(){let d=this;if(d.inverse)return d.inverse;let g=d.inverse={},p=d.fastCurieMap={},y={},l=(d["@language"]||"@none").toLowerCase(),c=d["@direction"],f=d.mappings,m=[...f.keys()].sort(ys);for(let h of m){let v=f.get(h);if(v===null)continue;let b=v["@container"]||"@none";if(b=[].concat(b).sort().join(""),v["@id"]===null)continue;let x=br(v["@id"]);for(let w of x){let I=g[w],E=T.isKeyword(w);if(I)!E&&!v._termHasColon&&y[w].push(h);else if(g[w]=I={},!E&&!v._termHasColon){y[w]=[h];let R={iri:w,terms:y[w]};w[0]in p?p[w[0]].push(R):p[w[0]]=[R]}if(I[b]||(I[b]={"@language":{},"@type":{},"@any":{}}),I=I[b],i(h,I["@any"],"@none"),v.reverse)i(h,I["@type"],"@reverse");else if(v["@type"]==="@none")i(h,I["@any"],"@none"),i(h,I["@language"],"@none"),i(h,I["@type"],"@none");else if("@type"in v)i(h,I["@type"],v["@type"]);else if("@language"in v&&"@direction"in v){let R=v["@language"],A=v["@direction"];R&&A?i(h,I["@language"],`${R}_${A}`.toLowerCase()):R?i(h,I["@language"],R.toLowerCase()):A?i(h,I["@language"],`_${A}`):i(h,I["@language"],"@null")}else"@language"in v?i(h,I["@language"],(v["@language"]||"@null").toLowerCase()):"@direction"in v?v["@direction"]?i(h,I["@language"],`_${v["@direction"]}`):i(h,I["@language"],"@none"):c?(i(h,I["@language"],`_${c}`),i(h,I["@language"],"@none"),i(h,I["@type"],"@none")):(i(h,I["@language"],l),i(h,I["@language"],"@none"),i(h,I["@type"],"@none"))}}for(let h in p)a(p,h,1);return g}function a(d,g,p){let y=d[g],l=d[g]={},c,f;for(let m of y)c=m.iri,p>=c.length?f="":f=c[p],f in l?l[f].push(m):l[f]=[m];for(let m in l)m!==""&&a(l,m,p+1)}function i(d,g,p){g.hasOwnProperty(p)||(g[p]=d)}function o(){let d={};return d.mappings=mr.clone(this.mappings),d.clone=this.clone,d.inverse=null,d.getInverse=this.getInverse,d.protected=mr.clone(this.protected),this.previousContext&&(d.previousContext=this.previousContext.clone()),d.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(d["@base"]=this["@base"]),"@language"in this&&(d["@language"]=this["@language"]),"@vocab"in this&&(d["@vocab"]=this["@vocab"]),d}function u(){return this.previousContext?this.previousContext.clone():this}};T.getContextValue=(e,t,n)=>{if(t===null)return n==="@context"?void 0:null;if(e.mappings.has(t)){let r=e.mappings.get(t);if(hs(n))return r;if(r.hasOwnProperty(n))return r[n]}if(n==="@language"&&n in e||n==="@direction"&&n in e)return e[n];if(n!=="@context")return null};T.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():e.processingMode==="json-ld-1.0";T.isKeyword=e=>{if(!X(e)||e[0]!=="@")return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function zt(e,t){if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return e===t;let n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let a=0;a<e.length;++a)if(!zt(e[a],t[a]))return!1;return!0}let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a in e){let i=e[a],o=t[a];if(a==="@container"&&Array.isArray(i)&&Array.isArray(o)&&(i=i.slice().sort(),o=o.slice().sort()),!zt(i,o))return!1}return!0}});var Dr=S((jr,Sr)=>{"use strict";var k=Q(),{isArray:re,isObject:te,isEmptyObject:Qt,isString:P,isUndefined:xt}=z(),{isList:Xt,isValue:Kt,isGraph:vs,isSubject:bs}=ue(),{expandIri:q,getContextValue:Z,isKeyword:Wt,process:tt,processingMode:bt}=Ie(),{isAbsolute:wt}=ye(),{REGEX_BCP47:Ir,REGEX_KEYWORD:ws,addValue:Y,asArray:ce,getValues:xs,validateTypeValue:Is}=K(),{handleEvent:ne}=Ue(),Ee={};Sr.exports=Ee;Ee.expand=o=>_(jr,[o],function*({activeCtx:e,activeProperty:t=null,element:n,options:r={},insideList:s=!1,insideIndex:a=!1,typeScopedContext:i=null}){if(n==null)return null;if(t==="@default"&&(r=Object.assign({},r,{isFrame:!1})),!re(n)&&!te(n))return!s&&(t===null||q(e,t,{vocab:!0},r)==="@graph")?(r.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:n}},options:r}),null):_r({activeCtx:e,activeProperty:t,value:n,options:r});if(re(n)){let f=[],m=Z(e,t,"@container")||[];s=s||m.includes("@list");for(let h=0;h<n.length;++h){let v=yield Ee.expand({activeCtx:e,activeProperty:t,element:n[h],options:r,insideIndex:a,typeScopedContext:i});s&&re(v)&&(v={"@list":v}),v!==null&&(re(v)?f=f.concat(v):f.push(v))}return f}let u=q(e,t,{vocab:!0},r),d=Z(e,t,"@context");i=i||(e.previousContext?e:null);let g=Object.keys(n).sort(),p=!a;if(p&&i&&g.length<=2&&!g.includes("@context"))for(let f of g){let m=q(i,f,{vocab:!0},r);if(m==="@value"){p=!1,e=i;break}if(m==="@id"&&g.length===1){p=!1;break}}p&&(e=e.revertToPreviousContext()),xt(d)||(e=yield tt({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(e=yield tt({activeCtx:e,localCtx:n["@context"],options:r})),i=e;let y=null;for(let f of g)if(q(e,f,{vocab:!0},r)==="@type"){y=y||f;let h=n[f],v=Array.isArray(h)?h.length>1?h.slice().sort():h:[h];for(let b of v){let x=Z(i,b,"@context");xt(x)||(e=yield tt({activeCtx:e,localCtx:x,options:r,propagate:!1}))}}let l={};yield Nr({activeCtx:e,activeProperty:t,expandedActiveProperty:u,element:n,expandedParent:l,options:r,insideList:s,typeKey:y,typeScopedContext:i}),g=Object.keys(l);let c=g.length;if("@value"in l){if("@type"in l&&("@language"in l||"@direction"in l))throw new k('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:l});let f=c-1;if("@type"in l&&(f-=1),"@index"in l&&(f-=1),"@language"in l&&(f-=1),"@direction"in l&&(f-=1),f!==0)throw new k('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:l});let m=l["@value"]===null?[]:ce(l["@value"]),h=xs(l,"@type");if(!(bt(e,1.1)&&h.includes("@json")&&h.length===1))if(m.length===0)r.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:l}},options:r}),l=null;else{if(!m.every(v=>P(v)||Qt(v))&&"@language"in l)throw new k("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:l});if(!h.every(v=>wt(v)&&!(P(v)&&v.indexOf("_:")===0)||Qt(v)))throw new k('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:l})}}else if("@type"in l&&!re(l["@type"]))l["@type"]=[l["@type"]];else if("@set"in l||"@list"in l){if(c>1&&!(c===2&&"@index"in l))throw new k('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:l});"@set"in l&&(l=l["@set"],g=Object.keys(l),c=g.length)}else c===1&&"@language"in l&&(r.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:l}},options:r}),l=null);return te(l)&&!r.keepFreeFloatingNodes&&!s&&(t===null||u==="@graph"||(Z(e,t,"@container")||[]).includes("@graph"))&&(l=Er({value:l,count:c,options:r})),l});function Er({value:e,count:t,options:n}){if(t===0||"@value"in e||"@list"in e||t===1&&"@id"in e){if(n.eventHandler){let r,s;t===0?(r="empty object",s="Dropping empty object."):"@value"in e?(r="object with only @value",s="Dropping object with only @value."):"@list"in e?(r="object with only @list",s="Dropping object with only @list."):t===1&&"@id"in e&&(r="object with only @id",s="Dropping object with only @id."),ne({event:{type:["JsonLdEvent"],code:r,level:"warning",message:s,details:{value:e}},options:n})}return null}return e}function Nr(d){return _(this,arguments,function*({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:s,options:a={},insideList:i,typeKey:o,typeScopedContext:u}){let g=Object.keys(r).sort(),p=[],y,l=r[o]&&q(e,re(r[o])?r[o][0]:r[o],{vocab:!0},$(F({},a),{typeExpansion:!0}))==="@json";for(let c of g){let f=r[c],m;if(c==="@context")continue;let h=q(e,c,{vocab:!0},a);if(h===null||!(wt(h)||Wt(h))){a.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:c,expandedProperty:h}},options:a});continue}if(Wt(h)){if(n==="@reverse")throw new k("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:f});if(h in s&&h!=="@included"&&h!=="@type")throw new k("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:h})}if(h==="@id"){if(!P(f)){if(!a.isFrame)throw new k('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:f});if(te(f)){if(!Qt(f))throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}else if(re(f)){if(!f.every(w=>P(w)))throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}else throw new k('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:f})}Y(s,"@id",ce(f).map(w=>{if(P(w)){let I=q(e,w,{base:!0},a);return a.eventHandler&&(I===null?ne(w===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:w}},options:a}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:w}},options:a}):wt(I)||ne({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:w,expandedId:I}},options:a})),I}return w}),{propertyIsArray:a.isFrame});continue}if(h==="@type"){te(f)&&(f=Object.fromEntries(Object.entries(f).map(([w,I])=>[q(u,w,{vocab:!0}),ce(I).map(E=>q(u,E,{base:!0,vocab:!0},$(F({},a),{typeExpansion:!0})))]))),Is(f,a.isFrame),Y(s,"@type",ce(f).map(w=>{if(P(w)){let I=q(u,w,{base:!0,vocab:!0},$(F({},a),{typeExpansion:!0}));return I!=="@json"&&!wt(I)&&a.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:w}},options:a}),I}return w}),{propertyIsArray:!!a.isFrame});continue}if(h==="@included"&&bt(e,1.1)){let w=ce(yield Ee.expand({activeCtx:e,activeProperty:t,element:f,options:a}));if(!w.every(I=>bs(I)))throw new k("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:f});Y(s,"@included",w,{propertyIsArray:!0});continue}if(h==="@graph"&&!(te(f)||re(f)))throw new k('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:f});if(h==="@value"){y=f,l&&bt(e,1.1)?s["@value"]=f:Y(s,"@value",f,{propertyIsArray:a.isFrame});continue}if(h==="@language"){if(f===null)continue;if(!P(f)&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:f});f=ce(f).map(w=>P(w)?w.toLowerCase():w);for(let w of f)P(w)&&!w.match(Ir)&&a.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:w}},options:a});Y(s,"@language",f,{propertyIsArray:a.isFrame});continue}if(h==="@direction"){if(!P(f)&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:f});f=ce(f);for(let w of f)if(P(w)&&w!=="ltr"&&w!=="rtl")throw new k('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:f});Y(s,"@direction",f,{propertyIsArray:a.isFrame});continue}if(h==="@index"){if(!P(f))throw new k('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:f});Y(s,"@index",f);continue}if(h==="@reverse"){if(!te(f))throw new k('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:f});if(m=yield Ee.expand({activeCtx:e,activeProperty:"@reverse",element:f,options:a}),"@reverse"in m)for(let I in m["@reverse"])Y(s,I,m["@reverse"][I],{propertyIsArray:!0});let w=s["@reverse"]||null;for(let I in m){if(I==="@reverse")continue;w===null&&(w=s["@reverse"]={}),Y(w,I,[],{propertyIsArray:!0});let E=m[I];for(let R=0;R<E.length;++R){let A=E[R];if(Kt(A)||Xt(A))throw new k('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});Y(w,I,A,{propertyIsArray:!0})}}continue}if(h==="@nest"){p.push(c);continue}let v=e,b=Z(e,c,"@context");xt(b)||(v=yield tt({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:a}));let x=Z(e,c,"@container")||[];if(x.includes("@language")&&te(f)){let w=Z(v,c,"@direction");m=Es(v,f,w,a)}else if(x.includes("@index")&&te(f)){let w=x.includes("@graph"),I=Z(v,c,"@index")||"@index",E=I!=="@index"&&q(e,I,{vocab:!0},a);m=yield $t({activeCtx:v,options:a,activeProperty:c,value:f,asGraph:w,indexKey:I,propertyIndex:E})}else if(x.includes("@id")&&te(f)){let w=x.includes("@graph");m=yield $t({activeCtx:v,options:a,activeProperty:c,value:f,asGraph:w,indexKey:"@id"})}else if(x.includes("@type")&&te(f))m=yield $t({activeCtx:v.revertToPreviousContext(),options:a,activeProperty:c,value:f,asGraph:!1,indexKey:"@type"});else{let w=h==="@list";if(w||h==="@set"){let I=t;w&&n==="@graph"&&(I=null),m=yield Ee.expand({activeCtx:v,activeProperty:I,element:f,options:a,insideList:w})}else Z(e,c,"@type")==="@json"?m={"@type":"@json","@value":f}:m=yield Ee.expand({activeCtx:v,activeProperty:c,element:f,options:a,insideList:!1})}if(!(m===null&&h!=="@value")){if(h!=="@list"&&!Xt(m)&&x.includes("@list")&&(m={"@list":ce(m)}),x.includes("@graph")&&!x.some(w=>w==="@id"||w==="@index")){if(m=ce(m),a.isFrame||(m=m.filter(w=>{let I=Object.keys(w).length;return Er({value:w,count:I,options:a})!==null})),m.length===0)continue;m=m.map(w=>({"@graph":ce(w)}))}if(v.mappings.has(c)&&v.mappings.get(c).reverse){let w=s["@reverse"]=s["@reverse"]||{};m=ce(m);for(let I=0;I<m.length;++I){let E=m[I];if(Kt(E)||Xt(E))throw new k('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});Y(w,h,E,{propertyIsArray:!0})}continue}Y(s,h,m,{propertyIsArray:!0})}}if("@value"in s&&!(s["@type"]==="@json"&&bt(e,1.1))){if((te(y)||re(y))&&!a.isFrame)throw new k('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:y})}for(let c of p){let f=re(r[c])?r[c]:[r[c]];for(let m of f){if(!te(m)||Object.keys(m).some(h=>q(e,h,{vocab:!0},a)==="@value"))throw new k("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:m});yield Nr({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:m,expandedParent:s,options:a,insideList:i,typeScopedContext:u,typeKey:o})}}})}function _r({activeCtx:e,activeProperty:t,value:n,options:r}){if(n==null)return null;let s=q(e,t,{vocab:!0},r);if(s==="@id")return q(e,n,{base:!0},r);if(s==="@type")return q(e,n,{vocab:!0,base:!0},$(F({},r),{typeExpansion:!0}));let a=Z(e,t,"@type");if((a==="@id"||s==="@graph")&&P(n)){let o=q(e,n,{base:!0},r);return o===null&&n.match(ws)&&r.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:r}),{"@id":o}}if(a==="@vocab"&&P(n))return{"@id":q(e,n,{vocab:!0,base:!0},r)};if(Wt(s))return n;let i={};if(a&&!["@id","@vocab","@none"].includes(a))i["@type"]=a;else if(P(n)){let o=Z(e,t,"@language");o!==null&&(i["@language"]=o);let u=Z(e,t,"@direction");u!==null&&(i["@direction"]=u)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),i["@value"]=n,i}function Es(e,t,n,r){let s=[],a=Object.keys(t).sort();for(let i of a){let o=q(e,i,{vocab:!0},r),u=t[i];re(u)||(u=[u]);for(let d of u){if(d===null)continue;if(!P(d))throw new k("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});let g={"@value":d};o!=="@none"&&(i.match(Ir)||r.eventHandler&&ne({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:i}},options:r}),g["@language"]=i.toLowerCase()),n&&(g["@direction"]=n),s.push(g)}}return s}function $t(o){return _(this,arguments,function*({activeCtx:e,options:t,activeProperty:n,value:r,asGraph:s,indexKey:a,propertyIndex:i}){let u=[],d=Object.keys(r).sort(),g=a==="@type";for(let p of d){if(g){let c=Z(e,p,"@context");xt(c)||(e=yield tt({activeCtx:e,localCtx:c,propagate:!1,options:t}))}let y=r[p];re(y)||(y=[y]),y=yield Ee.expand({activeCtx:e,activeProperty:n,element:y,options:t,insideList:!1,insideIndex:!0});let l;i?p==="@none"?l="@none":l=_r({activeCtx:e,activeProperty:a,value:p,options:t}):l=q(e,p,{vocab:!0},t),a==="@id"?p=q(e,p,{base:!0},t):g&&(p=l);for(let c of y){if(s&&!vs(c)&&(c={"@graph":[c]}),a==="@type")l==="@none"||(c["@type"]?c["@type"]=[p].concat(c["@type"]):c["@type"]=[p]);else{if(Kt(c)&&!["@language","@type","@index"].includes(a))throw new k(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${a}".`,"jsonld.SyntaxError",{code:"invalid value object",value:c});i?l!=="@none"&&Y(c,i,l,{propertyIsArray:!0,prependValue:!0}):l!=="@none"&&!(a in c)&&(c[a]=p)}u.push(c)}}return u})}});var nt=S((bo,Lr)=>{"use strict";var{isKeyword:Or}=Ie(),de=ue(),Yt=z(),fe=K(),Ns=Q(),U={};Lr.exports=U;U.createMergedNodeMap=(e,t)=>{t=t||{};let n=t.issuer||new fe.IdentifierIssuer("_:b"),r={"@default":{}};return U.createNodeMap(e,r,"@default",n),U.mergeNodeMaps(r)};U.createNodeMap=(e,t,n,r,s,a)=>{if(Yt.isArray(e)){for(let d of e)U.createNodeMap(d,t,n,r,void 0,a);return}if(!Yt.isObject(e)){a&&a.push(e);return}if(de.isValue(e)){if("@type"in e){let d=e["@type"];d.indexOf("_:")===0&&(e["@type"]=d=r.getId(d))}a&&a.push(e);return}else if(a&&de.isList(e)){let d=[];U.createNodeMap(e["@list"],t,n,r,s,d),a.push({"@list":d});return}if("@type"in e){let d=e["@type"];for(let g of d)g.indexOf("_:")===0&&r.getId(g)}Yt.isUndefined(s)&&(s=de.isBlankNode(e)?r.getId(e["@id"]):e["@id"]),a&&a.push({"@id":s});let i=t[n],o=i[s]=i[s]||{};o["@id"]=s;let u=Object.keys(e).sort();for(let d of u){if(d==="@id")continue;if(d==="@reverse"){let p={"@id":s},y=e["@reverse"];for(let l in y){let c=y[l];for(let f of c){let m=f["@id"];de.isBlankNode(f)&&(m=r.getId(m)),U.createNodeMap(f,t,n,r,m),fe.addValue(i[m],l,p,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(d==="@graph"){s in t||(t[s]={}),U.createNodeMap(e[d],t,s,r);continue}if(d==="@included"){U.createNodeMap(e[d],t,n,r);continue}if(d!=="@type"&&Or(d)){if(d==="@index"&&d in o&&(e[d]!==o[d]||e[d]["@id"]!==o[d]["@id"]))throw new Ns("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:o});o[d]=e[d];continue}let g=e[d];if(d.indexOf("_:")===0&&(d=r.getId(d)),g.length===0){fe.addValue(o,d,[],{propertyIsArray:!0});continue}for(let p of g)if(d==="@type"&&(p=p.indexOf("_:")===0?r.getId(p):p),de.isSubject(p)||de.isSubjectReference(p)){if("@id"in p&&!p["@id"])continue;let y=de.isBlankNode(p)?r.getId(p["@id"]):p["@id"];fe.addValue(o,d,{"@id":y},{propertyIsArray:!0,allowDuplicate:!1}),U.createNodeMap(p,t,n,r,y)}else if(de.isValue(p))fe.addValue(o,d,p,{propertyIsArray:!0,allowDuplicate:!1});else if(de.isList(p)){let y=[];U.createNodeMap(p["@list"],t,n,r,s,y),p={"@list":y},fe.addValue(o,d,p,{propertyIsArray:!0,allowDuplicate:!1})}else U.createNodeMap(p,t,n,r,s),fe.addValue(o,d,p,{propertyIsArray:!0,allowDuplicate:!1})}};U.mergeNodeMapGraphs=e=>{let t={};for(let n of Object.keys(e).sort())for(let r of Object.keys(e[n]).sort()){let s=e[n][r];r in t||(t[r]={"@id":r});let a=t[r];for(let i of Object.keys(s).sort())if(Or(i)&&i!=="@type")a[i]=fe.clone(s[i]);else for(let o of s[i])fe.addValue(a,i,fe.clone(o),{propertyIsArray:!0,allowDuplicate:!1})}return t};U.mergeNodeMaps=e=>{let t=e["@default"],n=Object.keys(e).sort();for(let r of n){if(r==="@default")continue;let s=e[r],a=t[r];a?"@graph"in a||(a["@graph"]=[]):t[r]=a={"@id":r,"@graph":[]};let i=a["@graph"];for(let o of Object.keys(s).sort()){let u=s[o];de.isSubjectReference(u)||i.push(u)}}return t}});var Tr=S((wo,Ar)=>{"use strict";var{isSubjectReference:_s}=ue(),{createMergedNodeMap:js}=nt(),Rr={};Ar.exports=Rr;Rr.flatten=e=>{let t=js(e),n=[],r=Object.keys(t).sort();for(let s=0;s<r.length;++s){let a=t[r[s]];_s(a)||n.push(a)}return n}});var Vr=S((Pr,Ur)=>{"use strict";var rn=Q(),Zt=ue(),rt=z(),{REGEX_BCP47:kr,addValue:qr}=K(),{handleEvent:Mr}=Ue(),{RDF_LIST:Ss,RDF_FIRST:Ct,RDF_REST:en,RDF_NIL:tn,RDF_TYPE:Ds,RDF_JSON_LITERAL:Os,XSD_BOOLEAN:Jr,XSD_DOUBLE:Fr,XSD_INTEGER:Hr,XSD_STRING:nn}=ht(),Br={};Ur.exports=Br;Br.fromRDF=(e,t)=>_(Pr,null,function*(){let{useRdfType:n=!1,useNativeTypes:r=!1,rdfDirection:s=null}=t,a={},i={"@default":a},o={};if(s){if(s==="compound-literal")throw new rn("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});if(s!=="i18n-datatype")throw new rn("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:s})}for(let g of e){let p=g.graph.termType==="DefaultGraph"?"@default":g.graph.value;p in i||(i[p]={}),p!=="@default"&&!(p in a)&&(a[p]={"@id":p});let y=i[p],l=g.subject.value,c=g.predicate.value,f=g.object;l in y||(y[l]={"@id":l});let m=y[l],h=f.termType.endsWith("Node");if(h&&!(f.value in y)&&(y[f.value]={"@id":f.value}),c===Ds&&!n&&h){qr(m,"@type",f.value,{propertyIsArray:!0});continue}let v=Ls(f,r,s,t);if(qr(m,c,v,{propertyIsArray:!0}),h)if(f.value===tn){let b=y[f.value];"usages"in b||(b.usages=[]),b.usages.push({node:m,property:c,value:v})}else f.value in o?o[f.value]=!1:o[f.value]={node:m,property:c,value:v}}for(let g in i){let p=i[g];if(!(tn in p))continue;let y=p[tn];if(y.usages){for(let l of y.usages){let c=l.node,f=l.property,m=l.value,h=[],v=[],b=Object.keys(c).length;for(;f===en&&rt.isObject(o[c["@id"]])&&rt.isArray(c[Ct])&&c[Ct].length===1&&rt.isArray(c[en])&&c[en].length===1&&(b===3||b===4&&rt.isArray(c["@type"])&&c["@type"].length===1&&c["@type"][0]===Ss)&&(h.push(c[Ct][0]),v.push(c["@id"]),l=o[c["@id"]],c=l.node,f=l.property,m=l.value,b=Object.keys(c).length,!!Zt.isBlankNode(c)););delete m["@id"],m["@list"]=h.reverse();for(let x of v)delete p[x]}delete y.usages}}let u=[],d=Object.keys(a).sort();for(let g of d){let p=a[g];if(g in i){let y=p["@graph"]=[],l=i[g],c=Object.keys(l).sort();for(let f of c){let m=l[f];Zt.isSubjectReference(m)||y.push(m)}}Zt.isSubjectReference(p)||u.push(p)}return u});function Ls(e,t,n,r){if(e.termType.endsWith("Node"))return{"@id":e.value};let s={"@value":e.value};if(e.language)e.language.match(kr)||r.eventHandler&&Mr({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:r}),s["@language"]=e.language;else{let a=e.datatype.value;if(a||(a=nn),a===Os){a="@json";try{s["@value"]=JSON.parse(s["@value"])}catch(i){throw new rn("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:s["@value"],cause:i})}}if(t){if(a===Jr)s["@value"]==="true"?s["@value"]=!0:s["@value"]==="false"&&(s["@value"]=!1);else if(rt.isNumeric(s["@value"]))if(a===Hr){let i=parseInt(s["@value"],10);i.toFixed(0)===s["@value"]&&(s["@value"]=i)}else a===Fr&&(s["@value"]=parseFloat(s["@value"]));[Jr,Hr,Fr,nn].includes(a)||(s["@type"]=a)}else if(n==="i18n-datatype"&&a.startsWith("https://www.w3.org/ns/i18n#")){let[,i,o]=a.split(/[#_]/);i.length>0&&(s["@language"]=i,i.match(kr)||r.eventHandler&&Mr({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:i}},options:r})),s["@direction"]=o}else a!==nn&&(s["@type"]=a)}return s}});var zr=S((Io,Gr)=>{"use strict";Gr.exports=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((n,r,s)=>{let a=s===0?"":",",i=r===void 0||typeof r=="symbol"?null:r;return n+a+e(i)},"")+"]":"{"+Object.keys(t).sort().reduce((n,r,s)=>{if(t[r]===void 0||typeof t[r]=="symbol")return n;let a=n.length===0?"":",";return n+a+e(r)+":"+e(t[r])},"")+"}"}});var Yr=S((Eo,Wr)=>{"use strict";var{createNodeMap:Rs}=nt(),{isKeyword:As}=Ie(),Xr=ue(),Ts=zr(),$r=Q(),it=z(),ks=K(),{handleEvent:qe}=Ue(),{RDF_FIRST:qs,RDF_REST:Ms,RDF_NIL:Js,RDF_TYPE:Fs,RDF_JSON_LITERAL:Hs,RDF_LANGSTRING:Bs,XSD_BOOLEAN:Ps,XSD_DOUBLE:Qr,XSD_INTEGER:Us,XSD_STRING:Vs}=ht(),{isAbsolute:It}=ye(),Kr={};Wr.exports=Kr;Kr.toRDF=(e,t)=>{let n=new ks.IdentifierIssuer("_:b"),r={"@default":{}};Rs(e,r,"@default",n);let s=[],a=Object.keys(r).sort();for(let i of a){let o;if(i==="@default")o={termType:"DefaultGraph",value:""};else if(It(i))i.startsWith("_:")?o={termType:"BlankNode"}:o={termType:"NamedNode"},o.value=i;else{t.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:i}},options:t});continue}Gs(s,r[i],o,n,t)}return s};function Gs(e,t,n,r,s){let a=Object.keys(t).sort();for(let i of a){let o=t[i],u=Object.keys(o).sort();for(let d of u){let g=o[d];if(d==="@type")d=Fs;else if(As(d))continue;for(let p of g){let y={termType:i.startsWith("_:")?"BlankNode":"NamedNode",value:i};if(!It(i)){s.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:i}},options:s});continue}let l={termType:d.startsWith("_:")?"BlankNode":"NamedNode",value:d};if(!It(d)){s.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:d}},options:s});continue}if(l.termType==="BlankNode"&&!s.produceGeneralizedRdf){s.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:r.getOldIds().find(f=>r.getId(f)===d)}},options:s});continue}let c=sn(p,r,e,n,s.rdfDirection,s);c&&e.push({subject:y,predicate:l,object:c,graph:n})}}}}function zs(e,t,n,r,s,a){let i={termType:"NamedNode",value:qs},o={termType:"NamedNode",value:Ms},u={termType:"NamedNode",value:Js},d=e.pop(),g=d?{termType:"BlankNode",value:t.getId()}:u,p=g;for(let y of e){let l=sn(y,t,n,r,s,a),c={termType:"BlankNode",value:t.getId()};n.push({subject:p,predicate:i,object:l,graph:r}),n.push({subject:p,predicate:o,object:c,graph:r}),p=c}if(d){let y=sn(d,t,n,r,s,a);n.push({subject:p,predicate:i,object:y,graph:r}),n.push({subject:p,predicate:o,object:u,graph:r})}return g}function sn(e,t,n,r,s,a){let i={};if(Xr.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let o=e["@value"],u=e["@type"]||null;if(u==="@json")i.value=Ts(o),i.datatype.value=Hs;else if(it.isBoolean(o))i.value=o.toString(),i.datatype.value=u||Ps;else if(it.isDouble(o)||u===Qr)it.isDouble(o)||(o=parseFloat(o)),i.value=o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=u||Qr;else if(it.isNumber(o))i.value=o.toFixed(0),i.datatype.value=u||Us;else if("@direction"in e&&s==="i18n-datatype"){let d=(e["@language"]||"").toLowerCase(),g=e["@direction"],p=`https://www.w3.org/ns/i18n#${d}_${g}`;i.datatype.value=p,i.value=o}else{if("@direction"in e&&s==="compound-literal")throw new $r("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});if("@direction"in e&&s)throw new $r("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:s});"@language"in e?("@direction"in e&&!s&&a.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:i.value}},options:a}),i.value=o,i.datatype.value=u||Bs,i.language=e["@language"]):("@direction"in e&&!s&&a.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:i.value}},options:a}),i.value=o,i.datatype.value=u||Vs)}}else if(Xr.isList(e)){let o=zs(e["@list"],t,n,r,s,a);i.termType=o.termType,i.value=o.value}else{let o=it.isObject(e)?e["@id"]:e;i.termType=o.startsWith("_:")?"BlankNode":"NamedNode",i.value=o}return i.termType==="NamedNode"&&!It(i.value)?(a.eventHandler&&qe({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:i.value}},options:a}),null):i}});var ii=S((No,ri)=>{"use strict";var{isKeyword:an}=Ie(),ie=ue(),L=z(),J=K(),Zr=ye(),st=Q(),{createNodeMap:Xs,mergeNodeMapGraphs:$s}=nt(),se={};ri.exports=se;se.frameMergedOrDefault=(e,t,n)=>{let r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},s=new J.IdentifierIssuer("_:b");Xs(e,r.graphMap,"@default",s),n.merged&&(r.graphMap["@merged"]=$s(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];let a=[];se.frame(r,Object.keys(r.subjects).sort(),t,a),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(i=>r.bnodeMap[i].length===1));return n.link={},Nt(a,n)};se.frame=(e,t,n,r,s=null)=>{ti(n),n=n[0];let a=e.options,i={embed:Et(n,a,"embed"),explicit:Et(n,a,"explicit"),requireAll:Et(n,a,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});let o=e.link[e.graph],u=Ks(e,t,n,i),d=Object.keys(u).sort();for(let g of d){let p=u[g];if(s===null?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},i.embed==="@link"&&g in o){Me(r,s,o[g]);continue}let y={"@id":g};if(g.indexOf("_:")===0&&J.addValue(e.bnodeMap,g,y,{propertyIsArray:!0}),o[g]=y,(i.embed==="@first"||i.embed==="@last")&&e.is11)throw new st("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(!(!e.embedded&&e.uniqueEmbeds[e.graph].hasOwnProperty(g))){if(e.embedded&&(i.embed==="@never"||Qs(p,e.graph,e.subjectStack))){Me(r,s,y);continue}if(e.embedded&&(i.embed=="@first"||i.embed=="@once")&&e.uniqueEmbeds[e.graph].hasOwnProperty(g)){Me(r,s,y);continue}if(i.embed==="@last"&&g in e.uniqueEmbeds[e.graph]&&Ws(e,g),e.uniqueEmbeds[e.graph][g]={parent:r,property:s},e.subjectStack.push({subject:p,graph:e.graph}),g in e.graphMap){let l=!1,c=null;"@graph"in n?(c=n["@graph"][0],l=!(g==="@merged"||g==="@default"),L.isObject(c)||(c={})):(l=e.graph!=="@merged",c={}),l&&se.frame($(F({},e),{graph:g,embedded:!1}),Object.keys(e.graphMap[g]).sort(),[c],y,"@graph")}"@included"in n&&se.frame($(F({},e),{embedded:!1}),t,n["@included"],y,"@included");for(let l of Object.keys(p).sort()){if(an(l)){if(y[l]=J.clone(p[l]),l==="@type")for(let c of p["@type"])c.indexOf("_:")===0&&J.addValue(e.bnodeMap,c,y,{propertyIsArray:!0});continue}if(!(i.explicit&&!(l in n)))for(let c of p[l]){let f=l in n?n[l]:Cr(i);if(ie.isList(c)){let m=n[l]&&n[l][0]&&n[l][0]["@list"]?n[l][0]["@list"]:Cr(i),h={"@list":[]};Me(y,l,h);let v=c["@list"];for(let b of v)ie.isSubjectReference(b)?se.frame($(F({},e),{embedded:!0}),[b["@id"]],m,h,"@list"):Me(h,"@list",J.clone(b))}else ie.isSubjectReference(c)?se.frame($(F({},e),{embedded:!0}),[c["@id"]],f,y,l):on(f[0],c)&&Me(y,l,J.clone(c))}}for(let l of Object.keys(n).sort()){if(l==="@type"){if(!L.isObject(n[l][0])||!("@default"in n[l][0]))continue}else if(an(l))continue;let c=n[l][0]||{};if(!Et(c,a,"omitDefault")&&!(l in y)){let m="@null";"@default"in c&&(m=J.clone(c["@default"])),L.isArray(m)||(m=[m]),y[l]=[{"@preserve":m}]}}for(let l of Object.keys(n["@reverse"]||{}).sort()){let c=n["@reverse"][l];for(let f of Object.keys(e.subjects))J.getValues(e.subjects[f],l).some(h=>h["@id"]===g)&&(y["@reverse"]=y["@reverse"]||{},J.addValue(y["@reverse"],l,[],{propertyIsArray:!0}),se.frame($(F({},e),{embedded:!0}),[f],c,y["@reverse"][l],s))}Me(r,s,y),e.subjectStack.pop()}}};se.cleanupNull=(e,t)=>{if(L.isArray(e))return e.map(r=>se.cleanupNull(r,t)).filter(r=>r);if(e==="@null")return null;if(L.isObject(e)){if("@id"in e){let n=e["@id"];if(t.link.hasOwnProperty(n)){let r=t.link[n].indexOf(e);if(r!==-1)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(let n in e)e[n]=se.cleanupNull(e[n],t)}return e};function Cr(e){let t={};for(let n in e)e[n]!==void 0&&(t["@"+n]=[e[n]]);return[t]}function Qs(e,t,n){for(let r=n.length-1;r>=0;--r){let s=n[r];if(s.graph===t&&s.subject["@id"]===e["@id"])return!0}return!1}function Et(e,t,n){let r="@"+n,s=r in e?e[r][0]:t[n];if(n==="embed"){if(s===!0)s="@once";else if(s===!1)s="@never";else if(s!=="@always"&&s!=="@never"&&s!=="@link"&&s!=="@first"&&s!=="@last"&&s!=="@once")throw new st("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e})}return s}function ti(e){if(!L.isArray(e)||e.length!==1||!L.isObject(e[0]))throw new st("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0]){for(let t of J.asArray(e[0]["@id"]))if(!(L.isObject(t)||Zr.isAbsolute(t))||L.isString(t)&&t.indexOf("_:")===0)throw new st("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}if("@type"in e[0]){for(let t of J.asArray(e[0]["@type"]))if(!(L.isObject(t)||Zr.isAbsolute(t)||t==="@json")||L.isString(t)&&t.indexOf("_:")===0)throw new st("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}function Ks(e,t,n,r){let s={};for(let a of t){let i=e.graphMap[e.graph][a];ni(e,i,n,r)&&(s[a]=i)}return s}function ni(e,t,n,r){let s=!0,a=!1;for(let i in n){let o=!1,u=J.getValues(t,i),d=J.getValues(n,i).length===0;if(i==="@id"){if(L.isEmptyObject(n["@id"][0]||{})?o=!0:n["@id"].length>=0&&(o=n["@id"].includes(u[0])),!r.requireAll)return o}else if(i==="@type"){if(s=!1,d){if(u.length>0)return!1;o=!0}else if(n["@type"].length===1&&L.isEmptyObject(n["@type"][0]))o=u.length>0;else for(let g of n["@type"])L.isObject(g)&&"@default"in g?o=!0:o=o||u.some(p=>p===g);if(!r.requireAll)return o}else{if(an(i))continue;{let g=J.getValues(n,i)[0],p=!1;if(g&&(ti([g]),p="@default"in g),s=!1,u.length===0&&p)continue;if(u.length>0&&d)return!1;if(g===void 0){if(u.length>0)return!1;o=!0}else if(ie.isList(g)){let y=g["@list"][0];if(ie.isList(u[0])){let l=u[0]["@list"];ie.isValue(y)?o=l.some(c=>on(y,c)):(ie.isSubject(y)||ie.isSubjectReference(y))&&(o=l.some(c=>ei(e,y,c,r)))}}else ie.isValue(g)?o=u.some(y=>on(g,y)):ie.isSubjectReference(g)?o=u.some(y=>ei(e,g,y,r)):L.isObject(g)?o=u.length>0:o=!1}}if(!o&&r.requireAll)return!1;a=a||o}return s||a}function Ws(e,t){let n=e.uniqueEmbeds[e.graph],r=n[t],s=r.parent,a=r.property,i={"@id":t};if(L.isArray(s)){for(let u=0;u<s.length;++u)if(J.compareValues(s[u],i)){s[u]=i;break}}else{let u=L.isArray(s[a]);J.removeValue(s,a,i,{propertyIsArray:u}),J.addValue(s,a,i,{propertyIsArray:u})}let o=u=>{let d=Object.keys(n);for(let g of d)g in n&&L.isObject(n[g].parent)&&n[g].parent["@id"]===u&&(delete n[g],o(g))};o(t)}function Nt(e,t){if(L.isArray(e))return e.map(n=>Nt(n,t));if(L.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(ie.isValue(e))return e;if(ie.isList(e))return e["@list"]=Nt(e["@list"],t),e;if("@id"in e){let n=e["@id"];if(t.link.hasOwnProperty(n)){let r=t.link[n].indexOf(e);if(r!==-1)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(let n in e){if(n==="@id"&&t.bnodesToClear.includes(e[n])){delete e["@id"];continue}e[n]=Nt(e[n],t)}}return e}function Me(e,t,n){L.isObject(e)?J.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function ei(e,t,n,r){if(!("@id"in n))return!1;let s=e.subjects[n["@id"]];return s&&ni(e,s,t,r)}function on(e,t){let n=t["@value"],r=t["@type"],s=t["@language"],a=e["@value"]?L.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],i=e["@type"]?L.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],o=e["@language"]?L.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return a.length===0&&i.length===0&&o.length===0?!0:!(!(a.includes(n)||L.isEmptyObject(a[0]))||!(!r&&i.length===0||i.includes(r)||r&&L.isEmptyObject(i[0]))||!(!s&&o.length===0||o.includes(s)||s&&L.isEmptyObject(o[0])))}});var pi=S((fi,hi)=>{"use strict";var fn=Q(),{isArray:Ne,isObject:_e,isString:li,isUndefined:ln}=z(),{isList:dn,isValue:be,isGraph:ci,isSimpleGraph:si,isSubjectReference:cn}=ue(),{expandIri:ui,getContextValue:V,isKeyword:di,process:un,processingMode:Ys}=Ie(),{removeBase:ai,prependBase:Zs}=ye(),{REGEX_KEYWORD:Cs,addValue:C,asArray:_t,compareShortestLeast:ea}=K(),j={};hi.exports=j;j.compact=s=>_(fi,[s],function*({activeCtx:e,activeProperty:t=null,element:n,options:r={}}){if(Ne(n)){let i=[];for(let o=0;o<n.length;++o){let u=yield j.compact({activeCtx:e,activeProperty:t,element:n[o],options:r});u!==null&&i.push(u)}return r.compactArrays&&i.length===1&&(V(e,t,"@container")||[]).length===0&&(i=i[0]),i}let a=V(e,t,"@context");if(ln(a)||(e=yield un({activeCtx:e,localCtx:a,propagate:!0,overrideProtected:!0,options:r})),_e(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){let l=r.link[n["@id"]];for(let c=0;c<l.length;++c)if(l[c].expanded===n)return l[c].compacted}if(be(n)||cn(n)){let l=j.compactValue({activeCtx:e,activeProperty:t,value:n,options:r});return r.link&&cn(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:l})),l}if(dn(n)&&(V(e,t,"@container")||[]).includes("@list"))return j.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:r});let i=t==="@reverse",o={},u=e;!be(n)&&!cn(n)&&(e=e.revertToPreviousContext());let d=V(u,t,"@context");ln(d)||(e=yield un({activeCtx:e,localCtx:d,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:o}));let g=n["@type"]||[];g.length>1&&(g=Array.from(g).sort());let p=e;for(let l of g){let c=j.compactIri({activeCtx:p,iri:l,relativeTo:{vocab:!0}}),f=V(u,c,"@context");ln(f)||(e=yield un({activeCtx:e,localCtx:f,options:r,propagate:!1}))}let y=Object.keys(n).sort();for(let l of y){let c=n[l];if(l==="@id"){let f=_t(c).map(h=>j.compactIri({activeCtx:e,iri:h,relativeTo:{vocab:!1},base:r.base}));f.length===1&&(f=f[0]);let m=j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o[m]=f;continue}if(l==="@type"){let f=_t(c).map(x=>j.compactIri({activeCtx:u,iri:x,relativeTo:{vocab:!0}}));f.length===1&&(f=f[0]);let m=j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),b=(V(e,m,"@container")||[]).includes("@set")&&Ys(e,1.1)||Ne(f)&&c.length===0;C(o,m,f,{propertyIsArray:b});continue}if(l==="@reverse"){let f=yield j.compact({activeCtx:e,activeProperty:"@reverse",element:c,options:r});for(let m in f)if(e.mappings.has(m)&&e.mappings.get(m).reverse){let h=f[m],b=(V(e,m,"@container")||[]).includes("@set")||!r.compactArrays;C(o,m,h,{propertyIsArray:b}),delete f[m]}if(Object.keys(f).length>0){let m=j.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});C(o,m,f)}continue}if(l==="@preserve"){let f=yield j.compact({activeCtx:e,activeProperty:t,element:c,options:r});Ne(f)&&f.length===0||C(o,l,f);continue}if(l==="@index"){if((V(e,t,"@container")||[]).includes("@index"))continue;let m=j.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});C(o,m,c);continue}if(l!=="@graph"&&l!=="@list"&&l!=="@included"&&di(l)){let f=j.compactIri({activeCtx:e,iri:l,relativeTo:{vocab:!0}});C(o,f,c);continue}if(!Ne(c))throw new fn("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(c.length===0){let f=j.compactIri({activeCtx:e,iri:l,value:c,relativeTo:{vocab:!0},reverse:i}),m=e.mappings.has(f)?e.mappings.get(f)["@nest"]:null,h=o;m&&(oi(e,m,r),_e(o[m])||(o[m]={}),h=o[m]),C(h,f,c,{propertyIsArray:!0})}for(let f of c){let m=j.compactIri({activeCtx:e,iri:l,value:f,relativeTo:{vocab:!0},reverse:i}),h=e.mappings.has(m)?e.mappings.get(m)["@nest"]:null,v=o;h&&(oi(e,h,r),_e(o[h])||(o[h]={}),v=o[h]);let b=V(e,m,"@container")||[],x=ci(f),w=dn(f),I;w?I=f["@list"]:x&&(I=f["@graph"]);let E=yield j.compact({activeCtx:e,activeProperty:m,element:w||x?I:f,options:r});if(w)if(Ne(E)||(E=[E]),!b.includes("@list"))E={[j.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:E},"@index"in f&&(E[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=f["@index"]);else{C(v,m,E,{valueIsArray:!0,allowDuplicate:!0});continue}if(x)if(b.includes("@graph")&&(b.includes("@id")||b.includes("@index")&&si(f))){let R;v.hasOwnProperty(m)?R=v[m]:v[m]=R={};let A=(b.includes("@id")?f["@id"]:f["@index"])||j.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});C(R,A,E,{propertyIsArray:!r.compactArrays||b.includes("@set")})}else b.includes("@graph")&&si(f)?(Ne(E)&&E.length>1&&(E={"@included":E}),C(v,m,E,{propertyIsArray:!r.compactArrays||b.includes("@set")})):(Ne(E)&&E.length===1&&r.compactArrays&&(E=E[0]),E={[j.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:E},"@id"in f&&(E[j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=f["@id"]),"@index"in f&&(E[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=f["@index"]),C(v,m,E,{propertyIsArray:!r.compactArrays||b.includes("@set")}));else if(b.includes("@language")||b.includes("@index")||b.includes("@id")||b.includes("@type")){let R;v.hasOwnProperty(m)?R=v[m]:v[m]=R={};let A;if(b.includes("@language"))be(E)&&(E=E["@value"]),A=f["@language"];else if(b.includes("@index")){let G=V(e,m,"@index")||"@index",Fe=j.compactIri({activeCtx:e,iri:G,relativeTo:{vocab:!0}});if(G==="@index")A=f["@index"],delete E[Fe];else{let at;if([A,...at]=_t(E[G]||[]),!li(A))A=null;else switch(at.length){case 0:delete E[G];break;case 1:E[G]=at[0];break;default:E[G]=at;break}}}else if(b.includes("@id")){let G=j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});A=E[G],delete E[G]}else if(b.includes("@type")){let G=j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),Fe;switch([A,...Fe]=_t(E[G]||[]),Fe.length){case 0:delete E[G];break;case 1:E[G]=Fe[0];break;default:E[G]=Fe;break}Object.keys(E).length===1&&"@id"in f&&(E=yield j.compact({activeCtx:e,activeProperty:m,element:{"@id":f["@id"]},options:r}))}A||(A=j.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),C(R,A,E,{propertyIsArray:b.includes("@set")})}else{let R=!r.compactArrays||b.includes("@set")||b.includes("@list")||Ne(E)&&E.length===0||l==="@list"||l==="@graph";C(v,m,E,{propertyIsArray:R})}}}return o}return n});j.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:s=!1,base:a=null})=>{if(t===null)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);let i=e.getInverse();if(di(t)&&t in i&&"@none"in i[t]&&"@type"in i[t]["@none"]&&"@none"in i[t]["@none"]["@type"])return i[t]["@none"]["@type"]["@none"];if(r.vocab&&t in i){let p=e["@language"]||"@none",y=[];_e(n)&&"@index"in n&&!("@graph"in n)&&y.push("@index","@index@set"),_e(n)&&"@preserve"in n&&(n=n["@preserve"][0]),ci(n)?("@index"in n&&y.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&y.push("@graph@id","@graph@id@set"),y.push("@graph","@graph@set","@set"),"@index"in n||y.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||y.push("@graph@id","@graph@id@set")):_e(n)&&!be(n)&&y.push("@id","@id@set","@type","@set@type");let l="@language",c="@null";if(s)l="@type",c="@reverse",y.push("@set");else if(dn(n)){"@index"in n||y.push("@list");let m=n["@list"];if(m.length===0)l="@any",c="@none";else{let h=m.length===0?p:null,v=null;for(let b=0;b<m.length;++b){let x=m[b],w="@none",I="@none";if(be(x))if("@direction"in x){let E=(x["@language"]||"").toLowerCase(),R=x["@direction"];w=`${E}_${R}`}else"@language"in x?w=x["@language"].toLowerCase():"@type"in x?I=x["@type"]:w="@null";else I="@id";if(h===null?h=w:w!==h&&be(x)&&(h="@none"),v===null?v=I:I!==v&&(v="@none"),h==="@none"&&v==="@none")break}h=h||"@none",v=v||"@none",v!=="@none"?(l="@type",c=v):c=h}}else{if(be(n))if("@language"in n&&!("@index"in n)){y.push("@language","@language@set"),c=n["@language"];let m=n["@direction"];m&&(c=`${c}_${m}`)}else"@direction"in n&&!("@index"in n)?c=`_${n["@direction"]}`:"@type"in n&&(l="@type",c=n["@type"]);else l="@type",c="@id";y.push("@set")}y.push("@none"),_e(n)&&!("@index"in n)&&y.push("@index","@index@set"),be(n)&&Object.keys(n).length===1&&y.push("@language","@language@set");let f=ta(e,t,n,y,l,c);if(f!==null)return f}if(r.vocab&&"@vocab"in e){let p=e["@vocab"];if(t.indexOf(p)===0&&t!==p){let y=t.substr(p.length);if(!e.mappings.has(y))return y}}let o=null,u=[],d=e.fastCurieMap,g=t.length-1;for(let p=0;p<g&&t[p]in d;++p)d=d[t[p]],""in d&&u.push(d[""][0]);for(let p=u.length-1;p>=0;--p){let y=u[p],l=y.terms;for(let c of l){let f=c+":"+t.substr(y.iri.length);e.mappings.get(c)._prefix&&(!e.mappings.has(f)||n===null&&e.mappings.get(f)["@id"]===t)&&(o===null||ea(f,o)<0)&&(o=f)}}if(o!==null)return o;for(let[p,y]of e.mappings)if(y&&y._prefix&&t.startsWith(p+":"))throw new fn(`Absolute IRI "${t}" confused with prefix "${p}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!r.vocab)if("@base"in e)if(e["@base"]){let p=ai(Zs(a,e["@base"]),t);return Cs.test(p)?`./${p}`:p}else return t;else return ai(a,t);return t};j.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(be(n)){let o=V(e,t,"@type"),u=V(e,t,"@language"),d=V(e,t,"@direction"),g=V(e,t,"@container")||[],p="@index"in n&&!g.includes("@index");if(!p&&o!=="@none"&&(n["@type"]===o||"@language"in n&&n["@language"]===u&&"@direction"in n&&n["@direction"]===d||"@language"in n&&n["@language"]===u||"@direction"in n&&n["@direction"]===d))return n["@value"];let y=Object.keys(n).length,l=y===1||y===2&&"@index"in n&&!p,c="@language"in e,f=li(n["@value"]),m=e.mappings.has(t)&&e.mappings.get(t)["@language"]===null;if(l&&o!=="@none"&&(!c||!f||m))return n["@value"];let h={};return p&&(h[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?h[j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=j.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(h[j.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(h[j.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),h[j.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],h}let s=ui(e,t,{vocab:!0},r),a=V(e,t,"@type"),i=j.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:a==="@vocab"},base:r.base});return a==="@id"||a==="@vocab"||s==="@graph"?i:{[j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:i}};function ta(e,t,n,r,s,a){a===null&&(a="@null");let i=[];if((a==="@id"||a==="@reverse")&&_e(n)&&"@id"in n){a==="@reverse"&&i.push("@reverse");let u=j.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(u)&&e.mappings.get(u)&&e.mappings.get(u)["@id"]===n["@id"]?i.push.apply(i,["@vocab","@id"]):i.push.apply(i,["@id","@vocab"])}else{i.push(a);let u=i.find(d=>d.includes("_"));u&&i.push(u.replace(/^[^_]+_/,"_"))}i.push("@none");let o=e.inverse[t];for(let u of r){if(!(u in o))continue;let d=o[u][s];for(let g of i)if(g in d)return d[g]}return null}function oi(e,t,n){if(ui(e,t,{vocab:!0},n)!=="@nest")throw new fn("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}});var yi=S((So,gi)=>{"use strict";gi.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(n,r)},t.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(n)},t.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(n)},t}});var Ea=S((Do,xi)=>{"use strict";var mi=dt(),vi=Yn(),je=K(),we=dr(),hn=je.IdentifierIssuer,he=Q(),na=Bt(),jt=hr(),{expand:ra}=Dr(),{flatten:ia}=Tr(),{fromRDF:sa}=Vr(),{toRDF:aa}=Yr(),{frameMergedOrDefault:oa,cleanupNull:la}=ii(),{isArray:ze,isObject:Je,isString:pe}=z(),{isSubjectReference:ca}=ue(),{expandIri:ua,getInitialContext:St,process:bi,processingMode:pn}=Ie(),{compact:da,compactIri:fa}=pi(),{createNodeMap:ha,createMergedNodeMap:pa,mergeNodeMaps:ga}=nt(),{logEventHandler:ya,logWarningEventHandler:ma,safeEventHandler:va,setDefaultEventHandler:ba,setupEventHandler:wa,strictEventHandler:xa,unhandledEventHandler:Ia}=Ue(),wi=function(e){let t={},r=new na({max:100});e.compact=function(u,d,g){return _(this,arguments,function*(a,i,o){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(i===null)throw new he("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(a===null)return null;o=s(o,{base:pe(a)?a:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new hn("_:b"),contextResolver:new we({sharedCache:r})}),o.link&&(o.skipExpansion=!0),o.compactToRelative||delete o.base;let p;o.skipExpansion?p=a:p=yield e.expand(a,o);let y=yield e.processContext(St(o),i,o),l=yield da({activeCtx:y,element:p,options:o});o.compactArrays&&!o.graph&&ze(l)?l.length===1?l=l[0]:l.length===0&&(l={}):o.graph&&Je(l)&&(l=[l]),Je(i)&&"@context"in i&&(i=i["@context"]),i=je.clone(i),ze(i)||(i=[i]);let c=i;i=[];for(let m=0;m<c.length;++m)(!Je(c[m])||Object.keys(c[m]).length>0)&&i.push(c[m]);let f=i.length>0;if(i.length===1&&(i=i[0]),ze(l)){let m=fa({activeCtx:y,iri:"@graph",relativeTo:{vocab:!0}}),h=l;l={},f&&(l["@context"]=i),l[m]=h}else if(Je(l)&&f){let m=l;l={"@context":i};for(let h in m)l[h]=m[h]}return l})},e.expand=function(o,u){return _(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");i=s(i,{keepFreeFloatingNodes:!1,contextResolver:new we({sharedCache:r})});let d={},g=[];if("expandContext"in i){let c=je.clone(i.expandContext);Je(c)&&"@context"in c?d.expandContext=c:d.expandContext={"@context":c},g.push(d.expandContext)}let p;if(!pe(a))d.input=je.clone(a);else{let c=yield e.get(a,i);p=c.documentUrl,d.input=c.document,c.contextUrl&&(d.remoteContext={"@context":c.contextUrl},g.push(d.remoteContext))}"base"in i||(i.base=p||"");let y=St(i);for(let c of g)y=yield bi({activeCtx:y,localCtx:c,options:i});let l=yield ra({activeCtx:y,element:d.input,options:i});return Je(l)&&"@graph"in l&&Object.keys(l).length===1?l=l["@graph"]:l===null&&(l=[]),ze(l)||(l=[l]),l})},e.flatten=function(u,d,g){return _(this,arguments,function*(a,i,o){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof i=="function"?i=null:i=i||null,o=s(o,{base:pe(a)?a:"",contextResolver:new we({sharedCache:r})});let p=yield e.expand(a,o),y=ia(p);return i===null?y:(o.graph=!0,o.skipExpansion=!0,yield e.compact(y,i,o))})},e.frame=function(u,d,g){return _(this,arguments,function*(a,i,o){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(o=s(o,{base:pe(a)?a:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new we({sharedCache:r})}),pe(i)){let b=yield e.get(i,o);if(i=b.document,b.contextUrl){let x=i["@context"];x?ze(x)?x.push(b.contextUrl):x=[x,b.contextUrl]:x=b.contextUrl,i["@context"]=x}}let p=i?i["@context"]||{}:{},y=yield e.processContext(St(o),p,o);o.hasOwnProperty("omitGraph")||(o.omitGraph=pn(y,1.1)),o.hasOwnProperty("pruneBlankNodeIdentifiers")||(o.pruneBlankNodeIdentifiers=pn(y,1.1));let l=yield e.expand(a,o),c=F({},o);c.isFrame=!0,c.keepFreeFloatingNodes=!0;let f=yield e.expand(i,c),m=Object.keys(i).map(b=>ua(y,b,{vocab:!0}));c.merged=!m.includes("@graph"),c.is11=pn(y,1.1);let h=oa(l,f,c);c.graph=!o.omitGraph,c.skipExpansion=!0,c.link={},c.framing=!0;let v=yield e.compact(h,p,c);return c.link={},v=la(v,c),v})},e.link=function(a,i,o){return _(this,null,function*(){let u={};return i&&(u["@context"]=i),u["@embed"]="@link",e.frame(a,u,o)})},e.normalize=e.canonize=function(o,u){return _(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(i=s(i,{base:pe(a)?a:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new we({sharedCache:r})}),"inputFormat"in i){if(i.inputFormat!=="application/n-quads"&&i.inputFormat!=="application/nquads")throw new he("Unknown canonicalization input format.","jsonld.CanonizeError");let p=jt.parse(a);return mi.canonize(p,i)}let d=F({},i);delete d.format,d.produceGeneralizedRdf=!1;let g=yield e.toRDF(a,d);return mi.canonize(g,i)})},e.fromRDF=function(o,u){return _(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");i=s(i,{format:pe(a)?"application/n-quads":void 0});let{format:d}=i,{rdfParser:g}=i;if(d){if(g=g||t[d],!g)throw new he("Unknown input format.","jsonld.UnknownFormat",{format:d})}else g=()=>a;let p=yield g(a);return sa(p,i)})},e.toRDF=function(o,u){return _(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");i=s(i,{base:pe(a)?a:"",skipExpansion:!1,contextResolver:new we({sharedCache:r})});let d;i.skipExpansion?d=a:d=yield e.expand(a,i);let g=aa(d,i);if(i.format){if(i.format==="application/n-quads"||i.format==="application/nquads")return jt.serialize(g);throw new he("Unknown output format.","jsonld.UnknownFormat",{format:i.format})}return g})},e.createNodeMap=function(o,u){return _(this,arguments,function*(a,i){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");i=s(i,{base:pe(a)?a:"",contextResolver:new we({sharedCache:r})});let d=yield e.expand(a,i);return pa(d,i)})},e.merge=function(u,d,g){return _(this,arguments,function*(a,i,o){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!ze(a))throw new TypeError('Could not merge, "docs" must be an array.');typeof i=="function"?i=null:i=i||null,o=s(o,{contextResolver:new we({sharedCache:r})});let p=yield Promise.all(a.map(b=>{let x=F({},o);return e.expand(b,x)})),y=!0;"mergeNodes"in o&&(y=o.mergeNodes);let l=o.issuer||new hn("_:b"),c={"@default":{}};for(let b=0;b<p.length;++b){let x=je.relabelBlankNodes(p[b],{issuer:new hn("_:b"+b+"-")}),w=y||b===0?c:{"@default":{}};if(ha(x,w,"@default",l),w!==c)for(let I in w){let E=w[I];if(!(I in c)){c[I]=E;continue}let R=c[I];for(let A in E)A in R||(R[A]=E[A])}}let f=ga(c),m=[],h=Object.keys(f).sort();for(let b=0;b<h.length;++b){let x=f[h[b]];ca(x)||m.push(x)}return i===null?m:(o.graph=!0,o.skipExpansion=!0,yield e.compact(m,i,o))})},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:a=>e._documentLoader=a}),e.documentLoader=a=>_(this,null,function*(){throw new he("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:a})}),e.get=function(a,i){return _(this,null,function*(){let o;typeof i.documentLoader=="function"?o=i.documentLoader:o=e.documentLoader;let u=yield o(a);try{if(!u.document)throw new he("No remote document found at the given URL.","jsonld.NullRemoteDocument");pe(u.document)&&(u.document=JSON.parse(u.document))}catch(d){throw new he("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:d,remoteDoc:u})}return u})},e.processContext=function(a,i,o){return _(this,null,function*(){return o=s(o,{base:"",contextResolver:new we({sharedCache:r})}),i===null?St(o):(i=je.clone(i),Je(i)&&"@context"in i||(i={"@context":i}),bi({activeCtx:a,localCtx:i,options:o}))})},e.getContextValue=Ie().getContextValue,e.documentLoaders={},e.useDocumentLoader=function(a){if(!(a in e.documentLoaders))throw new he('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});e.documentLoader=e.documentLoaders[a].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(a,i){t[a]=i},e.unregisterRDFParser=function(a){delete t[a]},e.registerRDFParser("application/n-quads",jt.parse),e.registerRDFParser("application/nquads",jt.parse),e.url=ye(),e.logEventHandler=ya,e.logWarningEventHandler=ma,e.safeEventHandler=va,e.setDefaultEventHandler=ba,e.strictEventHandler=xa,e.unhandledEventHandler=Ia,e.util=je,Object.assign(e,je),e.promises=e,e.RequestQueue=kt(),e.JsonLdProcessor=yi()(e),vi.setupGlobals(e),vi.setupDocumentLoaders(e);function s(a,u){var d=u,{documentLoader:i=e.documentLoader}=d,o=yn(d,["documentLoader"]);if(a&&"compactionMap"in a)throw new he('"compactionMap" not supported.',"jsonld.OptionsError");if(a&&"expansionMap"in a)throw new he('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:i},o,a,{eventHandler:wa({options:a})})}return e},gn=function(){return wi(function(){return gn()})};wi(gn);xi.exports=gn});export{Ea as a};
