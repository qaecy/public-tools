import{a as B}from"./chunk-HGQPUHNU.js";import{ac as I,jc as S,pc as E}from"./chunk-4NDDJHS7.js";import{a as L}from"./chunk-OIPN42EH.js";import{ea as x,ha as M,ia as k}from"./chunk-L6BWHE7V.js";import{Eb as a,Fb as s,Jc as C,Kb as b,Mb as c,Mc as F,Nb as y,Wb as m,Za as _,_ as p,bc as v,ea as d,ia as f,ra as u,sa as g,sb as h,ub as w}from"./chunk-NZYFJ7MV.js";import{j as i}from"./chunk-RZZ4GCVR.js";var T=(()=>{let t=class t{constructor(){this._components=new I,this._modelName="model"}processFile(e){return i(this,null,function*(){this._modelName=e.name.split(".")[0];let[o,r]=yield Promise.all([e.arrayBuffer(),this._getLoader()]);this._model=yield r.load(new Uint8Array(o))})}downloadResult(){return i(this,null,function*(){if(!this._model)throw new Error("Model has not yet been processed");let e={type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},o=new JSZip,l=this._components.get(S).export(this._model);o.file("geometry.frag",new Blob([l]));let N=yield o.generateAsync(e);L(N,`${this._modelName}.zip`)})}_getLoader(){return i(this,null,function*(){this._components.init();let e=this._components.get(E);return yield e.setup(),e})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function j(n,t){if(n&1){let D=b();a(0,"button",2),c("click",function(){u(D);let o=y();return g(o.downloadResult())}),m(1," Download result "),s()}}var Q=(()=>{let t=class t{constructor(){this._fragmentsService=d(T),this.processed=!1}loadIFC(){return i(this,null,function*(){this.processed=!1;let e=yield B(".ifc");yield this._fragmentsService.processFile(e),this.processed=!0})}downloadResult(){this._fragmentsService.downloadResult()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=f({type:t,selectors:[["app-convert-fragments"]],standalone:!0,features:[v],decls:5,vars:1,consts:[["title","Convert to fragments"],[2,"display","flex","flex-direction","column","gap","5px"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",3,"click",4,"ngIf"]],template:function(o,r){o&1&&(a(0,"lib-page-section",0)(1,"div",1)(2,"button",2),c("click",function(){return r.loadIFC()}),m(3,"Load file"),s(),h(4,j,2,0,"button",3),s()()),o&2&&(_(4),w("ngIf",r.processed))},dependencies:[F,C,k,M,x]});let n=t;return n})();export{Q as a};
