import{a as ie}from"./chunk-L2HEPCHX.js";import{b as W,n as F,t as O}from"./chunk-ASG7CGOZ.js";import{i as ze}from"./chunk-NZQVPUIM.js";import{a as je,d as v}from"./chunk-RLQXEM26.js";import{_b as A,ab as te,bb as Ce,cb as ne,db as Me,fb as j,gb as z,hb as re,jb as ke,jc as G,kb as Le,lb as Ge,nb as We,nc as be,qb as we,rb as Ne,sb as He,tb as Ue,xb as Te}from"./chunk-4NDDJHS7.js";import{c as _}from"./chunk-OIPN42EH.js";import{h as ee,j as c}from"./chunk-RZZ4GCVR.js";var ae=class{constructor(){this.namespace="https://web-bim/resources/",this.enabledParsers={products:!1,fso:!1,bot:!0},this.subSettings={products:new V,fso:new Q,bot:new $},this.fileName="lbd.ttl"}},V=class{constructor(){this.includeParents=!0}},Q=class{constructor(){this.includePorts=!1}};var $=class{constructor(){this.includeInterfaces=!1}};var lt=ee(ie());O();var Ke=ee(ie());O();O();var ve={children:[{children:[{children:[{name:"IfcProject",id:103090709},{name:"IfcProjectLibrary",id:653396225}],name:"IfcContext",id:3419103109},{children:[{children:[{name:"IfcOccupant",id:4143007308}],name:"IfcActor",id:2296667514},{children:[{name:"IfcActionRequest",id:3821786052},{name:"IfcCostItem",id:3895139033},{name:"IfcCostSchedule",id:1419761937},{name:"IfcPerformanceHistory",id:2382730787},{name:"IfcPermit",id:3327091369},{name:"IfcProjectOrder",id:2904328755},{name:"IfcWorkCalendar",id:4088093105},{children:[{name:"IfcWorkPlan",id:4218914973},{name:"IfcWorkSchedule",id:3342526732}],name:"IfcWorkControl",id:1028945134}],name:"IfcControl",id:3293443760},{children:[{name:"IfcAsset",id:3460190687},{name:"IfcInventory",id:2391368822},{children:[{name:"IfcStructuralLoadCase",id:385403989}],name:"IfcStructuralLoadGroup",id:1252848954},{name:"IfcStructuralResultGroup",id:2986769608},{children:[{name:"IfcBuildingSystem",id:1177604601},{children:[{name:"IfcDistributionCircuit",id:562808652}],name:"IfcDistributionSystem",id:3205830791},{name:"IfcStructuralAnalysisModel",id:2515109513},{name:"IfcZone",id:1033361043}],name:"IfcSystem",id:2254336722}],name:"IfcGroup",id:2706460486},{children:[{name:"IfcEvent",id:4148101412},{name:"IfcProcedure",id:2744685151},{name:"IfcTask",id:3473067441}],name:"IfcProcess",id:2945172077},{children:[{name:"IfcAnnotation",id:1674181508},{children:[{children:[{children:[{name:"IfcBeamStandardCase",id:2906023776}],name:"IfcBeam",id:753842376},{name:"IfcBuildingElementProxy",id:1095909175},{name:"IfcChimney",id:3296154744},{children:[{name:"IfcColumnStandardCase",id:905975707}],name:"IfcColumn",id:843113511},{name:"IfcCovering",id:1973544240},{name:"IfcCurtainWall",id:3495092785},{children:[{name:"IfcDoorStandardCase",id:3242481149}],name:"IfcDoor",id:395920057},{name:"IfcFooting",id:900683007},{children:[{name:"IfcMemberStandardCase",id:1911478936}],name:"IfcMember",id:1073191201},{name:"IfcPile",id:1687234759},{children:[{name:"IfcPlateStandardCase",id:1156407060}],name:"IfcPlate",id:3171933400},{name:"IfcRailing",id:2262370178},{name:"IfcRamp",id:3024970846},{name:"IfcRampFlight",id:3283111854},{name:"IfcRoof",id:2016517767},{name:"IfcShadingDevice",id:1329646415},{children:[{name:"IfcSlabElementedCase",id:3127900445},{name:"IfcSlabStandardCase",id:3027962421}],name:"IfcSlab",id:1529196076},{name:"IfcStair",id:331165859},{name:"IfcStairFlight",id:4252922144},{children:[{name:"IfcWallElementedCase",id:4156078855},{name:"IfcWallStandardCase",id:3512223829}],name:"IfcWall",id:2391406946},{children:[{name:"IfcWindowStandardCase",id:486154966}],name:"IfcWindow",id:3304561284}],name:"IfcBuildingElement",id:3299480353},{name:"IfcCivilElement",id:1677625105},{children:[{children:[{name:"IfcActuator",id:4288193352},{name:"IfcAlarm",id:3087945054},{name:"IfcController",id:25142252},{name:"IfcFlowInstrument",id:182646315},{name:"IfcProtectiveDeviceTrippingUnit",id:2295281155},{name:"IfcSensor",id:4086658281},{name:"IfcUnitaryControlElement",id:630975310}],name:"IfcDistributionControlElement",id:1062813311},{children:[{name:"IfcDistributionChamberElement",id:1052013943},{children:[{name:"IfcAirToAirHeatRecovery",id:2056796094},{name:"IfcBoiler",id:32344328},{name:"IfcBurner",id:2938176219},{name:"IfcChiller",id:3902619387},{name:"IfcCoil",id:639361253},{name:"IfcCondenser",id:2272882330},{name:"IfcCooledBeam",id:4136498852},{name:"IfcCoolingTower",id:3640358203},{name:"IfcElectricGenerator",id:264262732},{name:"IfcElectricMotor",id:402227799},{name:"IfcEngine",id:2814081492},{name:"IfcEvaporativeCooler",id:3747195512},{name:"IfcEvaporator",id:484807127},{name:"IfcHeatExchanger",id:3319311131},{name:"IfcHumidifier",id:2068733104},{name:"IfcMotorConnection",id:2474470126},{name:"IfcSolarDevice",id:3420628829},{name:"IfcTransformer",id:3825984169},{name:"IfcTubeBundle",id:3026737570},{name:"IfcUnitaryEquipment",id:4292641817}],name:"IfcEnergyConversionDevice",id:1658829314},{children:[{name:"IfcAirTerminalBox",id:177149247},{name:"IfcDamper",id:4074379575},{name:"IfcElectricDistributionBoard",id:862014818},{name:"IfcElectricTimeControl",id:1003880860},{name:"IfcFlowMeter",id:2188021234},{name:"IfcProtectiveDevice",id:738039164},{name:"IfcSwitchingDevice",id:1162798199},{name:"IfcValve",id:4207607924}],name:"IfcFlowController",id:2058353004},{children:[{name:"IfcCableCarrierFitting",id:635142910},{name:"IfcCableFitting",id:1051757585},{name:"IfcDuctFitting",id:342316401},{name:"IfcJunctionBox",id:2176052936},{name:"IfcPipeFitting",id:310824031}],name:"IfcFlowFitting",id:4278956645},{children:[{name:"IfcCompressor",id:3571504051},{name:"IfcFan",id:3415622556},{name:"IfcPump",id:90941305}],name:"IfcFlowMovingDevice",id:3132237377},{children:[{name:"IfcCableCarrierSegment",id:3758799889},{name:"IfcCableSegment",id:4217484030},{name:"IfcDuctSegment",id:3518393246},{name:"IfcPipeSegment",id:3612865200}],name:"IfcFlowSegment",id:987401354},{children:[{name:"IfcElectricFlowStorageDevice",id:3310460725},{name:"IfcTank",id:812556717}],name:"IfcFlowStorageDevice",id:707683696},{children:[{name:"IfcAirTerminal",id:1634111441},{name:"IfcAudioVisualAppliance",id:277319702},{name:"IfcCommunicationsAppliance",id:3221913625},{name:"IfcElectricAppliance",id:1904799276},{name:"IfcFireSuppressionTerminal",id:1426591983},{name:"IfcLamp",id:76236018},{name:"IfcLightFixture",id:629592764},{name:"IfcMedicalDevice",id:1437502449},{name:"IfcOutlet",id:3694346114},{name:"IfcSanitaryTerminal",id:3053780830},{name:"IfcSpaceHeater",id:1999602285},{name:"IfcStackTerminal",id:1404847402},{name:"IfcWasteTerminal",id:4237592921}],name:"IfcFlowTerminal",id:2223149337},{children:[{name:"IfcDuctSilencer",id:1360408905},{name:"IfcFilter",id:819412036},{name:"IfcInterceptor",id:4175244083}],name:"IfcFlowTreatmentDevice",id:3508470533}],name:"IfcDistributionFlowElement",id:3040386961}],name:"IfcDistributionElement",id:1945004755},{name:"IfcElementAssembly",id:4123344466},{children:[{name:"IfcBuildingElementPart",id:2979338954},{name:"IfcDiscreteAccessory",id:1335981549},{name:"IfcFastener",id:647756555},{name:"IfcMechanicalFastener",id:377706215},{children:[{name:"IfcReinforcingBar",id:979691226},{name:"IfcReinforcingMesh",id:2320036040},{name:"IfcTendon",id:3824725483},{name:"IfcTendonAnchor",id:2347447852}],name:"IfcReinforcingElement",id:3027567501},{name:"IfcVibrationIsolator",id:2391383451}],name:"IfcElementComponent",id:1623761950},{children:[{children:[{name:"IfcProjectionElement",id:3651124850}],name:"IfcFeatureElementAddition",id:2143335405},{children:[{children:[{name:"IfcOpeningStandardCase",id:3079942009}],name:"IfcOpeningElement",id:3588315303},{name:"IfcVoidingFeature",id:926996030}],name:"IfcFeatureElementSubtraction",id:1287392070},{name:"IfcSurfaceFeature",id:3101698114}],name:"IfcFeatureElement",id:2827207264},{children:[{name:"IfcFurniture",id:1509553395},{name:"IfcSystemFurnitureElement",id:413509423}],name:"IfcFurnishingElement",id:263784265},{name:"IfcGeographicElement",id:3493046030},{name:"IfcTransportElement",id:1620046519},{name:"IfcVirtualElement",id:2769231204}],name:"IfcElement",id:1758889154},{name:"IfcGrid",id:3009204131},{children:[{name:"IfcDistributionPort",id:3041715199}],name:"IfcPort",id:3740093272},{name:"IfcProxy",id:3219374653},{children:[{children:[{name:"IfcExternalSpatialElement",id:1209101575}],name:"IfcExternalSpatialStructureElement",id:2853485674},{children:[{name:"IfcBuilding",id:4031249490},{name:"IfcBuildingStorey",id:3124254112},{name:"IfcSite",id:4097777520},{name:"IfcSpace",id:3856911033}],name:"IfcSpatialStructureElement",id:2706606064},{name:"IfcSpatialZone",id:463610769}],name:"IfcSpatialElement",id:1412071761},{children:[{children:[{children:[{name:"IfcStructuralLinearAction",id:1807405624}],name:"IfcStructuralCurveAction",id:1004757350},{name:"IfcStructuralPointAction",id:2082059205},{children:[{name:"IfcStructuralPlanarAction",id:1621171031}],name:"IfcStructuralSurfaceAction",id:3657597509}],name:"IfcStructuralAction",id:682877961},{children:[{name:"IfcStructuralCurveReaction",id:2757150158},{name:"IfcStructuralPointReaction",id:1235345126},{name:"IfcStructuralSurfaceReaction",id:603775116}],name:"IfcStructuralReaction",id:3689010777}],name:"IfcStructuralActivity",id:3544373492},{children:[{children:[{name:"IfcStructuralCurveConnection",id:4243806635},{name:"IfcStructuralPointConnection",id:734778138},{name:"IfcStructuralSurfaceConnection",id:1975003073}],name:"IfcStructuralConnection",id:1179482911},{children:[{children:[{name:"IfcStructuralCurveMemberVarying",id:2445595289}],name:"IfcStructuralCurveMember",id:214636428},{children:[{name:"IfcStructuralSurfaceMemberVarying",id:2218152070}],name:"IfcStructuralSurfaceMember",id:3979015343}],name:"IfcStructuralMember",id:530289379}],name:"IfcStructuralItem",id:3136571912}],name:"IfcProduct",id:4208778838},{children:[{children:[{name:"IfcConstructionEquipmentResource",id:3898045240},{name:"IfcConstructionMaterialResource",id:1060000209},{name:"IfcConstructionProductResource",id:488727124},{name:"IfcCrewResource",id:3295246426},{name:"IfcLaborResource",id:3827777499},{name:"IfcSubContractResource",id:148013059}],name:"IfcConstructionResource",id:2559216714}],name:"IfcResource",id:2914609552}],name:"IfcObject",id:3888040117},{children:[{children:[{name:"IfcEventType",id:4024345920},{name:"IfcProcedureType",id:569719735},{name:"IfcTaskType",id:3206491090}],name:"IfcTypeProcess",id:3736923433},{children:[{name:"IfcDoorStyle",id:526551008},{children:[{children:[{name:"IfcBeamType",id:819618141},{name:"IfcBuildingElementProxyType",id:1909888760},{name:"IfcChimneyType",id:2197970202},{name:"IfcColumnType",id:300633059},{name:"IfcCoveringType",id:1916426348},{name:"IfcCurtainWallType",id:1457835157},{name:"IfcDoorType",id:2323601079},{name:"IfcFootingType",id:1893162501},{name:"IfcMemberType",id:3181161470},{name:"IfcPileType",id:1158309216},{name:"IfcPlateType",id:4017108033},{name:"IfcRailingType",id:2893384427},{name:"IfcRampFlightType",id:2324767716},{name:"IfcRampType",id:1469900589},{name:"IfcRoofType",id:2781568857},{name:"IfcShadingDeviceType",id:4074543187},{name:"IfcSlabType",id:2533589738},{name:"IfcStairFlightType",id:1039846685},{name:"IfcStairType",id:338393293},{name:"IfcWallType",id:1898987631},{name:"IfcWindowType",id:4009809668}],name:"IfcBuildingElementType",id:1950629157},{name:"IfcCivilElementType",id:3893394355},{children:[{children:[{name:"IfcActuatorType",id:2874132201},{name:"IfcAlarmType",id:3001207471},{name:"IfcControllerType",id:578613899},{name:"IfcFlowInstrumentType",id:4037862832},{name:"IfcProtectiveDeviceTrippingUnitType",id:655969474},{name:"IfcSensorType",id:1783015770},{name:"IfcUnitaryControlElementType",id:3179687236}],name:"IfcDistributionControlElementType",id:2063403501},{children:[{name:"IfcDistributionChamberElementType",id:1599208980},{children:[{name:"IfcAirToAirHeatRecoveryType",id:1871374353},{name:"IfcBoilerType",id:231477066},{name:"IfcBurnerType",id:2188180465},{name:"IfcChillerType",id:2951183804},{name:"IfcCoilType",id:2301859152},{name:"IfcCondenserType",id:2816379211},{name:"IfcCooledBeamType",id:335055490},{name:"IfcCoolingTowerType",id:2954562838},{name:"IfcElectricGeneratorType",id:1534661035},{name:"IfcElectricMotorType",id:1217240411},{name:"IfcEngineType",id:132023988},{name:"IfcEvaporativeCoolerType",id:3174744832},{name:"IfcEvaporatorType",id:3390157468},{name:"IfcHeatExchangerType",id:1251058090},{name:"IfcHumidifierType",id:1806887404},{name:"IfcMotorConnectionType",id:977012517},{name:"IfcSolarDeviceType",id:1072016465},{name:"IfcTransformerType",id:1692211062},{name:"IfcTubeBundleType",id:1600972822},{name:"IfcUnitaryEquipmentType",id:1911125066}],name:"IfcEnergyConversionDeviceType",id:2107101300},{children:[{name:"IfcAirTerminalBoxType",id:1411407467},{name:"IfcDamperType",id:3961806047},{name:"IfcElectricDistributionBoardType",id:2417008758},{name:"IfcElectricTimeControlType",id:712377611},{name:"IfcFlowMeterType",id:3815607619},{name:"IfcProtectiveDeviceType",id:1842657554},{name:"IfcSwitchingDeviceType",id:2315554128},{name:"IfcValveType",id:728799441}],name:"IfcFlowControllerType",id:3907093117},{children:[{name:"IfcCableCarrierFittingType",id:395041908},{name:"IfcCableFittingType",id:2674252688},{name:"IfcDuctFittingType",id:869906466},{name:"IfcJunctionBoxType",id:4288270099},{name:"IfcPipeFittingType",id:804291784}],name:"IfcFlowFittingType",id:3198132628},{children:[{name:"IfcCompressorType",id:3850581409},{name:"IfcFanType",id:346874300},{name:"IfcPumpType",id:2250791053}],name:"IfcFlowMovingDeviceType",id:1482959167},{children:[{name:"IfcCableCarrierSegmentType",id:3293546465},{name:"IfcCableSegmentType",id:1285652485},{name:"IfcDuctSegmentType",id:3760055223},{name:"IfcPipeSegmentType",id:4231323485}],name:"IfcFlowSegmentType",id:1834744321},{children:[{name:"IfcElectricFlowStorageDeviceType",id:3277789161},{name:"IfcTankType",id:5716631}],name:"IfcFlowStorageDeviceType",id:1339347760},{children:[{name:"IfcAirTerminalType",id:3352864051},{name:"IfcAudioVisualApplianceType",id:1532957894},{name:"IfcCommunicationsApplianceType",id:400855858},{name:"IfcElectricApplianceType",id:663422040},{name:"IfcFireSuppressionTerminalType",id:4222183408},{name:"IfcLampType",id:1051575348},{name:"IfcLightFixtureType",id:1161773419},{name:"IfcMedicalDeviceType",id:1114901282},{name:"IfcOutletType",id:2837617999},{name:"IfcSanitaryTerminalType",id:1768891740},{name:"IfcSpaceHeaterType",id:1305183839},{name:"IfcStackTerminalType",id:3112655638},{name:"IfcWasteTerminalType",id:1133259667}],name:"IfcFlowTerminalType",id:2297155007},{children:[{name:"IfcDuctSilencerType",id:2030761528},{name:"IfcFilterType",id:1810631287},{name:"IfcInterceptorType",id:3946677679}],name:"IfcFlowTreatmentDeviceType",id:3009222698}],name:"IfcDistributionFlowElementType",id:3849074793}],name:"IfcDistributionElementType",id:3256556792},{name:"IfcElementAssemblyType",id:2397081782},{children:[{name:"IfcBuildingElementPartType",id:39481116},{name:"IfcDiscreteAccessoryType",id:2635815018},{name:"IfcFastenerType",id:2489546625},{name:"IfcMechanicalFastenerType",id:2108223431},{children:[{name:"IfcReinforcingBarType",id:2572171363},{name:"IfcReinforcingMeshType",id:2310774935},{name:"IfcTendonAnchorType",id:3081323446},{name:"IfcTendonType",id:2415094496}],name:"IfcReinforcingElementType",id:964333572},{name:"IfcVibrationIsolatorType",id:3313531582}],name:"IfcElementComponentType",id:2590856083},{children:[{name:"IfcFurnitureType",id:1268542332},{name:"IfcSystemFurnitureElementType",id:1580310250}],name:"IfcFurnishingElementType",id:4238390223},{name:"IfcGeographicElementType",id:4095422895},{name:"IfcTransportElementType",id:2097647324}],name:"IfcElementType",id:339256511},{children:[{children:[{name:"IfcSpaceType",id:3812236995}],name:"IfcSpatialStructureElementType",id:3893378262},{name:"IfcSpatialZoneType",id:2481509218}],name:"IfcSpatialElementType",id:710998568},{name:"IfcWindowStyle",id:1299126871}],name:"IfcTypeProduct",id:2347495698},{children:[{children:[{name:"IfcConstructionEquipmentResourceType",id:2185764099},{name:"IfcConstructionMaterialResourceType",id:4105962743},{name:"IfcConstructionProductResourceType",id:1525564444},{name:"IfcCrewResourceType",id:1815067380},{name:"IfcLaborResourceType",id:428585644},{name:"IfcSubContractResourceType",id:4095615324}],name:"IfcConstructionResourceType",id:2574617495}],name:"IfcTypeResource",id:3698973494}],name:"IfcTypeObject",id:1628702193}],name:"IfcObjectDefinition",id:219451334},{children:[{children:[{children:[{name:"IfcDoorLiningProperties",id:2963535650},{name:"IfcDoorPanelProperties",id:1714330368},{name:"IfcPermeableCoveringProperties",id:3566463478},{name:"IfcReinforcementDefinitionProperties",id:3765753017},{name:"IfcWindowLiningProperties",id:336235671},{name:"IfcWindowPanelProperties",id:512836454}],name:"IfcPreDefinedPropertySet",id:3967405729},{name:"IfcPropertySet",id:1451395588},{children:[{name:"IfcElementQuantity",id:1883228015}],name:"IfcQuantitySet",id:2090586900}],name:"IfcPropertySetDefinition",id:3357820518},{children:[{name:"IfcPropertySetTemplate",id:492091185},{children:[{name:"IfcComplexPropertyTemplate",id:3875453745},{name:"IfcSimplePropertyTemplate",id:3663146110}],name:"IfcPropertyTemplate",id:3521284610}],name:"IfcPropertyTemplateDefinition",id:1482703590}],name:"IfcPropertyDefinition",id:1680319473},{children:[{children:[{name:"IfcRelAssignsToActor",id:1683148259},{name:"IfcRelAssignsToControl",id:2495723537},{children:[{name:"IfcRelAssignsToGroupByFactor",id:1027710054}],name:"IfcRelAssignsToGroup",id:1307041759},{name:"IfcRelAssignsToProcess",id:4278684876},{name:"IfcRelAssignsToProduct",id:2857406711},{name:"IfcRelAssignsToResource",id:205026976}],name:"IfcRelAssigns",id:3939117080},{children:[{name:"IfcRelAssociatesApproval",id:4095574036},{name:"IfcRelAssociatesClassification",id:919958153},{name:"IfcRelAssociatesConstraint",id:2728634034},{name:"IfcRelAssociatesDocument",id:982818633},{name:"IfcRelAssociatesLibrary",id:3840914261},{name:"IfcRelAssociatesMaterial",id:2655215786}],name:"IfcRelAssociates",id:1865459582},{children:[{children:[{name:"IfcRelConnectsPathElements",id:3945020480},{name:"IfcRelConnectsWithRealizingElements",id:3678494232}],name:"IfcRelConnectsElements",id:1204542856},{name:"IfcRelConnectsPortToElement",id:4201705270},{name:"IfcRelConnectsPorts",id:3190031847},{name:"IfcRelConnectsStructuralActivity",id:2127690289},{children:[{name:"IfcRelConnectsWithEccentricity",id:504942748}],name:"IfcRelConnectsStructuralMember",id:1638771189},{name:"IfcRelContainedInSpatialStructure",id:3242617779},{name:"IfcRelCoversBldgElements",id:886880790},{name:"IfcRelCoversSpaces",id:2802773753},{name:"IfcRelFillsElement",id:3940055652},{name:"IfcRelFlowControlElements",id:279856033},{name:"IfcRelInterferesElements",id:427948657},{name:"IfcRelReferencedInSpatialStructure",id:1245217292},{name:"IfcRelSequence",id:4122056220},{name:"IfcRelServicesBuildings",id:366585022},{children:[{children:[{name:"IfcRelSpaceBoundary2ndLevel",id:1521410863}],name:"IfcRelSpaceBoundary1stLevel",id:3523091289}],name:"IfcRelSpaceBoundary",id:3451746338}],name:"IfcRelConnects",id:826625072},{name:"IfcRelDeclares",id:2565941209},{children:[{name:"IfcRelAggregates",id:160246688},{name:"IfcRelNests",id:3268803585},{name:"IfcRelProjectsElement",id:750771296},{name:"IfcRelVoidsElement",id:1401173127}],name:"IfcRelDecomposes",id:2551354335},{children:[{name:"IfcRelDefinesByObject",id:1462361463},{name:"IfcRelDefinesByProperties",id:4186316022},{name:"IfcRelDefinesByTemplate",id:307848117},{name:"IfcRelDefinesByType",id:781010003}],name:"IfcRelDefines",id:693640335}],name:"IfcRelationship",id:478536968}],name:"IfcRoot",id:2341007311};function oe(t,e,r=!1){return c(this,null,function*(){return new Promise(n=>{let i=M(e),a=Object.values(t).filter(o=>i.includes(o.type)).map(o=>r?o:o.expressID);n(a)})})}function M(t){let e=[],r=n(ve,t);return r&&i(r,e),e;function n(a,o){if(a.id==o)return a;if(a.children!=null){let s,l=null;for(s=0;l==null&&s<a.children.length;s++)l=n(a.children[s],o);return l}return null}function i(a,o=[]){if(o.push(a.id),a.children)for(let s=0;s<a.children.length;s++)i(a.children[s],o)}}function Ve(t,e){let r=Qe(ve,t);if(e===void 0)return r;let n=r.indexOf(e);return r.slice(n)}function Qe(t,e,r=[]){if(t.id===e)return[...r,t.id];if(t.children)for(let n of t.children){let i=Qe(n,e,[...r,t.id]);if(i.length>0)return i}return[]}function C(t){return c(this,null,function*(){return`inst:${yield je(t)}`})}var Rt="Bumper GuideBearing ImpactProtectionDevice StraightRunStair Vessel OdorFilter DuctEntry MultipositionController SignalAssembly DirectDrive Refrigerator InductionMotor NavigationElement FrostSensor Geoslice Counterweigth MedicalDevice Stair SphericalBearing RoofingCovering Cistern Bearing AdiabaticRigidMediaHumidifier Bidet SticthWire EarthquakeSensor TwoQuarterTurnRamp OilRetentionTray HatstoneBeam ContactWireSegment ElementedWall SmokeSensor ReinforcingBar GableRoof GullySump EvaporativeCooler SwitchDisconnector SoundAbsortion CableTrunkingSegment RailLubrication OpticalNetworkUnit BeamGrid Ceiling IntelligentPeripheral Two-positionController Faucet PressureReliefValve RackRail Printer RailJoint Signal ElectricTimeControl FiberSegment StudShearConnector TwoStairRunRamp CohesionPile WaterCoolingCoil Tiebar PipeExit WeatherStation Wall Chain EnergyConversionDevice Ladder Inverter Sprinkler FluorescentLamp Brace LandingSlab AdiabaticCompressedAirNozzleHumidifier TrasnportUnit WasteDisposalUnit RooftopUnit Telecommand HumiditySensor Insulation CableCarrierBend ButterflyRoof TendonDuct Post TransportElement GroutingDuct Coupling SafetyCage HighPressureSodiumLamp Ligature DomeRoof Trench SteaminjectionHumidifier DirectEvaporativeRandomMediaAirCooler CableTransition RotaryVaneCompressor FlowInstrument VoltmeterPeak SolarPanel BusBarSegment MansardRoof Feed-AirUnit AntivacuumValve AirTerminalBox DoubleRegulatingValve RadiationSensor TendonConduitCoupler BackdraftDamper SolidStratum MasterUnit Backfill FreestandingWaterCooler Air-cooledCondenser PointMachineLockingDevice BasebandUnit InternalCombustionMotor StraightRampFlight DuctSilencer ProtectiveDeviceTrippingUnit ThermostaticActuator PhaseAngleMeter GeotechnicalStratum BreakglassButton ReinforcedSoil FreestandingFan ControlPanel Switcher Reciever HipRoof PneumaticActuator DirectEvaporativePackagedRotaryAirCooler ElectronicFilter RailMechanicalEquipment SlabField NailPlate Shutter BlockingDevice LinesideElectronicUnit Trasnponder ThermalTrippingUnit Course TurnoutClosureSensor FlowSegment Hosereel ReplacedSoil QuarterTurnRamp FootingBeam InductorBank Microphone FlatRoof BallastedCourse Bath CompressionIsolator HippedGableRoof DeckAssembly LiquidTerminal StraightRunRamp RemoteUnit GeotechnicalAssembly Strand BirdProtection VoidStratum STRIPFOOTING ThermosiphonSealedTubeHeatExchanger DirectExpansionShell-and-TubeEvaporator WearingSlab Geomodel StraightStairFlight TendonConduit ControlDamper Bell DynamicallyCompactedSoil FuseDisconnector ManualPullBox RotaryCompressor CentrifugalBackward-InclinedCurvedFan FrictionPile Light Door ReluctanceSynchronousMotor TwoCurvedRunStair BaseIsolator Truss StayCable Telephone SuspensionAssembly Balustrade TendonAnchor DoubleReturnStair PipeJunction PowerJuntionBox Jalouise StackTerminal Molding Blade Semi-hermeticCompressor PHSensor RigidFrame Handrail Fender ShearConnector TimeDelay HeatExchanger PierAssembly WashingMachine DuctFitting RubberDamper DispatchingBoard ShearWall IndirectEvaporativeWetCoil Fan SumpBuster CommunicationsAppliance CircuitBreaker CargoVehicle Stud BarTendon GullyTrap Ramp BRACKET Gate VacuumMooringDevice Boiler DXCoolingCoil BaseStationController ResidualCurrentTrippingUnit Roller QuarterTurnStair StartandStopSwitch ProgrammableController Evaporator Dowel Fence PierStem AirTerminal CompactFluorescentLamp Chimney SumpPump ProtectiveDevice Bolt CombinedControlElement ValveChamber HermeticCompressor CapacitorBank PowerFactorMeter StopCock DistributionChamberElement Flashing SteamBoiler CombinedFlowInstrument VoltmeterRMS MotorConnection RadiactivitySensor Pile LineTensioner HALFTURNRAMP DeepFoundation Mast InspectionChamber DuctBend FixedPlateCounterFlowExchanger SolarCollector TechnicalGabinet OxygenGenerator FireHydrant Speaker Guardrail FinnedTubeBundle PylonAssembly Membrane Buoy NaturalDraftCoolingTower DirectVaporativeWasher MixedSignalingDevice HighPressureMercuryLamp IonConcentrationSensor RailwayCrocodile FloorSlab Pump Plate DCMotor AdiabaticAtomizingHumidifier CO2Sensor LevelSensor ConductorSegment TransitionComponent Elevator ThinScrewCompressor Compressor AudioVisualAppliance DiscreteAccessory Insulator WindSensor DuctJuntion ProtectionCourse Pictoral ShearBar Railing CrossBracing DuctObstruction Timelock DampingSystem RigidDuctSegment Thermometer AirVehicle RollingStock PierCap Siren Condenser Apron FixedPlateParallelFlowExchanger WaterHeatingCoil Recharger CableArranger HalogenLamp DuctTransition GasCock PressureVessel RailMechanicalEquipmentAssembly SubscriberServer GasDetectionPanel UPS IndirectEvaporativeCoolingTowerorCoilCooler Pavement FiberTube MainBar Strainer ConductanceSensor CoatedTendon CurtainPanel SystemFurnitureElement Water-cooledBrazed-plateCondenser BuildingElementPart Water-cooledCondenser ShellandTubeExchanger Water-cooledShellTubeCondenser ResidualCurrentCircuitBreaker CableJunction Derailer ReinforcementRing Diaphragm CurrentTransformer RoofSlab Bed Coupler FlowMovingDevice ESCALATOR OpenTypeCompressor WheelSensor ApproachSlab GuardRail HydraulicActuator CoreSegment HarmonicFilter GasMeter Furniture SuspensionCable Terrain TurnoutHeating ScrollCompressor Table TumbleDryer JetGroutingPile ElectricFlowStorageDevice FireHosereel Weld Trumpet TensionEquipment WebPlate CentrfugalForward-CurvedFan Starter RainSensor SpiralStairFlight CableCarrierJunction Varistor BlastDamper CableSegment Sensor Chiller HeatPipe BreechingInlet Subgrade Transformer BeltDrive SubgradeBed Computer Arch ShedRoof TransitionSection ExpansionJointDevice Display Register RectangularSilencer ChangeoverValve SkirtingBoard TwoQuarterWindingStair ReciprocatingCompressor WirePairSegment DistributionFrame AnchorBolt Freezer FurnishingElement FreestandingElectricHeater RetainingWall AirHandler TrackElement LoadingArm FloorWaste WheeledVehicle Shelf AssitedButaneHumidifier SteamTrap Manhole DistributionControlElement Sleeving Sink Trunstile SlopeFill OpticalCableSegment Contactor IndicatorPanel CraneWaySystem SanitaryTerminal Modem ConduitSegment PlumbingWall Bending-yieldDamper Diffuser PipeFitting SmokeDamper EmergencyStop CableConnector PointMachineMountingDevice. ElectricGenerator VendingMachine Awning Rivet FlowFitting FixedEndAnchor Dropper VehicleStop CheckRail StructuralCable EarthworksElement PropellorAxialFan Ammeter TrafficCalminfgDevice Pilaster MechanicalForcedDraftCoolingTower Coil WaterCooledChiller PassiveCooledBeam FlowSensor TBeam Stringer DataOutlet SecurityLightning TelephoneOutlet PileCap DirectionSourceLightFixture LEDLamp FlowMeter Embankment SparkGap MovementSensor AudioSignalingDevice WallStud AirStation FireSensor IndirectEvaporativePackageAirCooler Damper Camera Actuator QuarterWindingStair PartitioningWall LightSensor PressureReducingValve GasSensor PavementCourse WaterBoiler MarineVehicle MomentarySwitch GroutedSoil TrochoidalCompressor ProportionalController CommunicationOutlet SolidWall RotaryWheel Humidistat SupportPile VisualSignalingDevice SteamHeatingCoil ElasticCushion HalfTurnStair DuctExit MechanicalInducedDraftCoolingTower E-UtranNodeB FireSmokeDamper CableCarrierConnector UnitaryControlElement COSensor HaulingGear Chopper ResidualCurrentSwitch DimmerSwitch EntranceWorks ChuteConveyor BalancingDamper BreakPressureTank Anti-ArcingDevice Burner Panel Shear-yieldDamper DuctSegment BeltConveyor Axial-yieldDamper OilMeter Thermostat HeatSensor CableExit SynchronousMotor FlowTreatmentDevice VariableFlowPressureIndependantTerminalBox HandOperatedActuator DynamicCompressor Amplifier WaterMeter EdgeBar Alarm SplicePlate Microwave GreaseInterceptor EarthingSwitch CoreCourse AircooledChiller Cladding EndSuctionPump CooledBeam BorePile Gravity-reliefDamper ScrewConveyor ElectricAppliance NetworkBridge Cowl Shelter WaveWall CaissonFoundation Caisson RailFastening AirToAirHeatRecovery Basin Grid MixingValve PipeBend EvaporativeCooledCondenser VibrationDamper DirectEvaporativeSlingersPackagedAirCooler WasteTrap ReinforcingMesh ElementComponent FreestandingWaterHeater SpeedRegulator SpiralRamp StairFlight Desk FloatingController CableEntry PavingSlab MimicPanel GeotechnicalElement FlowStorageDevice ExternalCombustionMotor PavilionRoof FreeFormRoof Ligthdome DrivenPile FlexiblePavement MovingWalkway RainbowRoof WasteTerminal RadioBlockCenter WaterStratum Grille Coping Purlin CoolingTower Voltmeter TendonCoupler AirConditioningUnit ConsumerUnit Kerb SpaceHeater TungstenFilamentLamp FormedDuct CylindricalBearing CombinedTransformer Radiator InsulationElement Tuner AirReleaseValve Booster Antenna ReliefDamper Footing PolyphaseMotor RailPad VibrationIsolator Flat-ovalSilencer Sump NetworkHub IsolatingValve StockRail TwoStraightRunStair Armour Sleeper Keypad PressureSensor ObstacleSensor ConveyorSegment RoofDrain InspectionPit Beam ElectricCooker DirectEvaporativeRigidMediaAirCooler Draw-OffCock BracedFrame DuctConnector GeographicElement PlateMember SoundSensor PierStemSegment Chord WaterFilter AssistedPropaneHumidifier Vehicle Wrapping Sprandel FilterCourse AccessoryAssembly DistributionBoard Covering TransportationDevice ElementAssembly SantirayFountain Mirror CatenaryWire ElectromagneticTrippingUnit HeatRecoveryChiller RoundSilencer Shoe Element FloodedShellandTubeEvaporator AdiabaticPan FrequencyTransformer DoubleCheckValve TubeAxialFan MobileTelecommunicationsAppliance Inductor PipeObstruction ElectricFlowTreatmentDevice GasTap FeedandExpansionTank FlowController BuildingElementProxy Beacon ShadingDevice Water-cooledShellCoilCondenser MovableWall HalfSetofBlades UnitaryEquipment TrackSlab Culvert ElectricMotor IndirectDirectCombination ServiceGPRSSupportNode TrackEndofAlignment CableBracket OLEDLamp Fax FireDamper Controller AnchoringBar StandaloneGenerator BasePlate CableCarrierTransition DirectExpansionEvaporator LiftingGear SpaceBar FlexibleDuctSegment CirculatorPump Skylight Slab TelephonyExchange DataJuntionBox Fastener RainwaterHopper AssistedSteamHumidifier Spool GravityDamper EarthworksFill VoltageLimiter Player CrashCushion Tank PadFooting IndentifierSensor AdiabaticUltrasonicHumidifier Vegetation Suspender ArmourUnit Filler Run-aroundCoilLoop BaseTranscieverStation GambrelRoof VerticallyDrainedSoil ContactSensor GussetPlate Rectifier Borehole PowerOutlet ElectricActuator DivertingValve OxygenPlant Rocker HalfWindingStair EnergyMeter CableFanout Rafter CHP Bollard Router CentrifugalAirfoilFan DilatationPanel AssistedElectricHumidifier AdiabaticWettedElement Valve ToggleSwitch Dishwasher RollerCompactedSoil DistributionElement ElectronicTrippingUnit MeterChamber PANELSTRENGTHENING AirParticlefilter VariableFlowPressureDependantTerminalBOx PipeConector BarrelRoof AlarmPanel RigidPipeSegment BirdCage StiffenerPlate RecordingEquipment SpringIsolator ArchSegement SnowDepthSensor TwoQuarterTurnStair ToiletPan SecurityCut-offValve FloorTrap PacketControlUnit Strut GatewayGPRSNodeSupport Lintel MooringDevice HollowcoreBeam SpiralRampFlight Glue Capacitor CheckValve RailBrace WorkSurface CoverPlate Well FreeFormStairFlight SwitchingDevice CompressedAirFilter OpticalLineTerminal FireMonitor ThreeQuarterWindingStair ReinforcingElement VerticalInlinePump Chair GasHeatCoil Diabolo BucketConveyor Whistle AbutmentAssembly GirderSegment TrainSensor RigidPavement Girder WeldedShellHermeticCompressor SolarDevice Filter LightFixture JunctionBox OilFilter AchorPlate ExpansionTank Outlet RollingPiston ShellandCoilEvaporator RampFlight ThermosiphonCoilTypeHeatExchanger Wire Gutter TimeRelay Sofa SidewalkSlab MobileSwitchingCenter Mullion CableFitting ElectricHeatingCoil PressureGauge TubeBundle Dehumidifier Repeater Collar TemperatureSensor SplitSystem ForeignObjectDetectionSensor Compensator Tendon ActiveCooledBeam CurvedStairFlight AdiabaticAirWasher SupportingGasAssembly Interceptor OilInterceptor Trapdoor EarthLeakerCircuitBreaker Lamp TrackedVehicle Lock StiffeningRib DistributionFlowElement Roof SingleScrewCompressor JoistBeam BoomBarrier WashHandBasin Scanner ConstantFlowTerminalBox Window Shower Water-cooledTube-in-TubeCondenser Urinal HandDryer Subrack Rail DiskBearing SubmersiblePump Automaton ViscousDamper SwitchBoard FlangePlate RemoteRadioUnit HydronicCoil ElastomericBearing PipeTransition NetworkAppliance Topping SpiralStair PlateHeatExchanger Mortar TensioningEndAnchor DirectExpansionTube-in-TubeEvaporator Relay CableCarrierFitting SurchargePreloadedSoil CurvedRunStair TurnoutPanel Photocopier PetrolInterceptor MSCServer MetalHalideLamp FireSuppressionTerminal ReinforcmentUnit Gateway PointSourceLightFixture Staple SplitCasePump MooringHooks FrequencyMeter KitchenMachine ThreeQuarterTurnStair RegulatingValve DirectExpansionBrazedPlateEvaporator PrecastPanel FlushingValve Frog EdgeBeam Column CyclonicInterceptor Louvre Battery SelectorSwitch VerticalTurbinePump MageneticMooringDevice FileCabinet FrictionDamper CableCarrierSegment Fridge-Freezer VacuumStation VoltageTransformer Convector CommissioningValve PunchingBar StorageTank BaseSlab FlowTerminal AssistedNaturalGasHumidifier TractionSwitchingAssembly TrackPanel Member FlexiblePipeSegment Sign WinderStairFlight Accesspoint IPNetworkEquipment FumeHoodExhaustDamper Nail PipeEntry CentrifugalRadialFan Engine Marker CurtainWall FixedPlateCrossFlowExchanger RailwayDetonator Rope AudiovisualOutlet VaneAxialFan EngineGenerator Cornice Sheet Screw CommunicationTerminal BuiltElement STANDCOLUMN MotorControlCentre Pot PipeSegment Projector CableLadderSegment MechanicalFastener TwinTowerEnthalpyRecoveryLoops CableTraySegment SlidingChair Flooring Humidifier SingleStageCompressor Parapet",$e=()=>Rt.split(" ");var{namedNode:N}=W,qe="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Ye=$e(),Pt=Ye.map(t=>t.toLowerCase()),se=class{constructor(e){this._writer=e}addProducts(e,r){return c(this,null,function*(){let n=yield oe(e,j,!0);for(let i of n){let a=yield C(i.GlobalId.value),o=be[i.type];if(a!==void 0&&o!==void 0)if(r)Ve(i.type,j).forEach(s=>{let l=be[s];if(l!==void 0){let d=Je(l);d&&this._writer.addQuad(N(a),N(qe),N(`beo:${d}`))}});else{let s=Je(o);s&&this._writer.addQuad(N(a),N(qe),N(`beo:${s}`))}}})}};function Je(t){let e=Pt.indexOf(t.toLowerCase().split("ifc")[1]);return e!==-1?Ye[e]:null}var Ze=(()=>{let e=class e extends A{constructor(n){super(n),this.enabled=!0,this._totalSteps=0,this._settings=new V,this._prefixes={beo:v.beo,ifc:v.ifc,rdfs:v.rdfs,inst:"https://web-bim/resources/"},this._writer=new F({prefixes:this._prefixes}),this._result="",this.events=new Ke.EventEmitter,this._fragmentManager=n.get(G),this._currentProgress=this._resetProgress()}get(){return e.uuid}setSettings(n){this._settings=n}setNamespace(n){this.addPrefix("inst",n)}addPrefix(n,i){this._prefixes[n]=i,this._writer=new F({prefixes:this._prefixes})}run(n){return c(this,null,function*(){n!==void 0&&(this._writer=n),this._t1=new Date().getTime();for(let i of this._fragmentManager.groups){this._currentProgress.step=0;let a=i[0],s=i[1].getLocalProperties();if(!s){console.error(`Fragments group ${a} doesn't have properties`);continue}let l=new se(this._writer),d=[{message:"Getting products",method:()=>c(this,null,function*(){yield l.addProducts(s,this._settings.includeParents)})}];this._totalSteps=d.length;for(let u of d)this._currentProgress.message=u.message,yield u.method(),this._currentProgress.step++,this._emitProgress();this._currentProgress.model++}return new Promise((i,a)=>{n===void 0?this._writer.end((o,s)=>{o&&a(o),this._result=s,i()}):i()})})}downloadResult(n="fso.ttl"){_(this._result,n,"text/turtle")}_resetProgress(){return this._currentProgress={totalModels:this._fragmentManager.groups.size,model:0,totalSteps:this._totalSteps,step:0,timePassed:0},this._currentProgress}_emitProgress(){this._t1!==void 0&&(this._currentProgress.timePassed=new Date().getTime()-this._t1),this.events.emit("trackProgress",this._currentProgress)}};e.uuid="57e0ce45-3dcc-42b9-bdef-0f3fef972112";let t=e;return t})();var at=ee(ie());O();O();var Xe={2254336722:["fso:DistributionSystem"],3740093272:["fso:Port"],987401354:["fso:Segment","fso:Component"],4278956645:["fso:Fitting","fso:Component"],2058353004:["fso:FlowController","fso:Component"],1658829314:["fso:EnergyConversionDevice","fso:Component"],3132237377:["fso:FlowMovingDevice","fso:Component"],707683696:["fso:StorageDevice","fso:Component"],2223149337:["fso:Terminal","fso:Component"],3508470533:["fso:TreatmentDevice","fso:Component"]};function et(t){return c(this,null,function*(){return new Promise(e=>{let r=Object.keys(Xe),n={};Object.values(t).filter(i=>i.type!==void 0).filter(i=>r.includes(i.type.toString())).forEach(i=>{let a=t[i.expressID].GlobalId.value;return a!==void 0&&(n[a]=Xe[i.type]),a}),e(n)})})}function tt(t){return c(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).filter(n=>n.type=Te).filter(n=>n.RelatingGroup!==void 0&&n.RelatedObjects!==void 0).forEach(n=>{let i=n.RelatingGroup.value;n.RelatedObjects.forEach(a=>{let o=a.value;Object.keys(r).includes(i.toString())?r[i].push(o):r[i]=[o]})}),e(r)})})}function nt(t){return c(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).filter(n=>n.type===Ne).forEach(n=>{n.RelatedPort.value!==void 0&&(r[n.RelatingPort.value]=n.RelatedPort.value)}),e(r)})})}function rt(t){return c(this,null,function*(){return new Promise(e=>{let r={};Object.values(t).filter(n=>n.type===He).forEach(n=>{n.RelatedElement.value!==void 0&&(r[n.RelatingPort.value]=n.RelatedElement.value)}),Object.values(t).filter(n=>n.type===Ge).forEach(n=>{n.RelatedObjects.forEach(i=>{r[i.value]=n.RelatingObject.value})}),e(r)})})}var{namedNode:p,literal:it}=W,Ee="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",ce=class{constructor(e){this._writer=e}addTypes(e){return c(this,null,function*(){let r=yield et(e);for(let n of Object.keys(r)){let i=yield C(n);r[n].forEach(o=>{this._writer.addQuad(p(i),p(Ee),p(o))})}})}addSystems(e,r){return c(this,null,function*(){let n=yield tt(e);for(let i of Object.keys(n)){let a=e[parseInt(i)],o=yield C(a.GlobalId.value);this._writer.addQuad(p(o),p("rdfs:label"),it(a.Name.value));for(let s of n[i])if(!r.includes(s)){let l=e[s].GlobalId.value,d=yield C(l);this._writer.addQuad(p(o),p("fso:hasComponent"),p(d))}}})}addPorts(e,r){return c(this,null,function*(){let n=yield oe(e,Me,!0),i=[],a=!1;for(let o of n){if(r){let s=yield C(o.GlobalId.value);this._writer.addQuad(p(s),p(Ee),p("fso:Port")),this._writer.addQuad(p(s),p("rdfs:label"),it(o.Name.value));let l=o.FlowDirection.value,d={SINK:"fso:InPort",SOURCE:"fso:OutPort",SOURCEANDSINK:"fso:BidirectionalPort",NOTDEFINED:"fso:BidirectionalPort"};Object.keys(d).includes(l)&&(!a&&d[l]!="fso:BidirectionalPort"&&(a=!0),this._writer.addQuad(p(s),p(Ee),p(d[l])))}i.push(o.expressID)}return a||console.warn("None of the ports in the model are directed, and therefore, it was not possible to determine flow directions!"),i})}getConnections(e,r,n){return c(this,null,function*(){let[i,a]=yield Promise.all([this._getPortPortConnections(e,n),this._getPortComponentConnections(e,n)]);for(let o of r){let s=a[o],l=i[o],d=a[l];if(s!==void 0&&d!==void 0){let u=e[s].GlobalId.value,g=e[d].GlobalId.value;if(u!==void 0&&g!==void 0){let S=yield C(u),m=yield C(g);this._writer.addQuad(p(S),p("fso:connectedWith"),p(m)),this._writer.addQuad(p(m),p("fso:connectedWith"),p(S));let T=e[o].FlowDirection?.value;T&&(T==="SOURCE"?(this._writer.addQuad(p(S),p("fso:suppliesFluidTo"),p(m)),this._writer.addQuad(p(m),p("fso:hasFluidSuppliedBy"),p(S))):T==="SINK"&&(this._writer.addQuad(p(S),p("fso:hasFluidSuppliedBy"),p(m)),this._writer.addQuad(p(m),p("fso:suppliesFluidTo"),p(S))))}}}})}_getPortPortConnections(e,r){return c(this,null,function*(){let n=yield nt(e);if(r)for(let i of Object.keys(n)){let a=n[i],o=e[parseInt(i)].GlobalId.value,s=e[a].GlobalId.value;if(o!==void 0&&s!==void 0){let l=yield C(o),d=yield C(s);this._writer.addQuad(p(l),p("fso:connectedPort"),p(d)),this._writer.addQuad(p(d),p("fso:connectedPort"),p(l))}}return n})}_getPortComponentConnections(e,r){return c(this,null,function*(){let n=yield rt(e);if(r)for(let i of Object.keys(n)){let a=n[i],o=e[parseInt(i)].GlobalId.value,s=e[a].GlobalId.value;if(o!==void 0&&s!==void 0){let l=yield C(o),d=yield C(s);this._writer.addQuad(p(l),p("fso:connectedElement"),p(d)),this._writer.addQuad(p(d),p("fso:connectedPort"),p(l))}}return n})}};var ot=(()=>{let e=class e extends A{constructor(n){super(n),this.enabled=!0,this._totalSteps=0,this._settings=new Q,this._prefixes={fso:v.fso,rdfs:v.rdfs,inst:"https://web-bim/resources/"},this._writer=new F({prefixes:this._prefixes}),this._result="",this.events=new at.EventEmitter,this._fragmentManager=n.get(G),this._currentProgress=this._resetProgress()}get(){return e.uuid}setSettings(n){this._settings=n}setNamespace(n){this.addPrefix("inst",n)}addPrefix(n,i){this._prefixes[n]=i,this._writer=new F({prefixes:this._prefixes})}run(n){return c(this,null,function*(){n!==void 0&&(this._writer=n),this._t1=new Date().getTime();for(let i of this._fragmentManager.groups){this._currentProgress.step=0;let a=i[0],s=i[1].getLocalProperties();if(!s){console.error(`Fragments group ${a} doesn't have properties`);continue}let l=new ce(this._writer),d=[],u=[{message:"Getting element types",method:()=>c(this,null,function*(){yield l.addTypes(s)})},{message:"Getting ports",method:()=>c(this,null,function*(){d=yield l.addPorts(s,this._settings.includePorts)})},{message:"Getting component connections",method:()=>c(this,null,function*(){yield l.getConnections(s,d,this._settings.includePorts)})},{message:"Getting systems",method:()=>c(this,null,function*(){yield l.addSystems(s,d)})}];this._totalSteps=u.length;for(let g of u)this._currentProgress.message=g.message,yield g.method(),this._currentProgress.step++,this._emitProgress();this._currentProgress.model++}return new Promise((i,a)=>{n===void 0?this._writer.end((o,s)=>{o&&a(o),this._result=s,i()}):i()})})}downloadResult(n="fso.ttl"){_(this._result,n,"text/turtle")}_resetProgress(){return this._currentProgress={totalModels:this._fragmentManager.groups.size,model:0,totalSteps:this._totalSteps,step:0,timePassed:0},this._currentProgress}_emitProgress(){this._t1!==void 0&&(this._currentProgress.timePassed=new Date().getTime()-this._t1),this.events.emit("trackProgress",this._currentProgress)}};e.uuid="f6ba8f5d-3d01-4a24-b24d-1b8663db5f83";let t=e;return t})();var st=ee(ie());O();O();var{namedNode:h}=W,le="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",de=class{constructor(e,r,n){this._writer=e,this._properties=r,this._settings=n}getSites(){return c(this,null,function*(){return this._writeClasses([Ce],"bot:Site")})}getBuildings(){return c(this,null,function*(){return this._writeClasses([re],"bot:Building")})}getStoreys(){return c(this,null,function*(){return this._writeClasses([z],"bot:Storey")})}getSpaces(){return c(this,null,function*(){return this._writeClasses([te],"bot:Space")})}getElements(){return c(this,null,function*(){let e=M(j);return this._writeClasses(e,"bot:Element")})}getSpaceAdjacentElementRelationships(){return c(this,null,function*(){let e=M(Le);yield this._writeOneToOneRel(e,"RelatingSpace","RelatedBuildingElement","bot:adjacentElement")})}getSpaceContainedElementRelationships(){return c(this,null,function*(){let e=M(we);yield this._writeOneToManyRel(e,"RelatingStructure","RelatedElements","bot:containsElement",[te])})}getStoreyElementRelationships(){return c(this,null,function*(){let e=M(we);yield this._writeOneToManyRel(e,"RelatingStructure","RelatedElements","bot:hasElement",[z])})}getSubElementRelationships(){return c(this,null,function*(){this._writeOpeningFills()})}getAdjacentElementRelationships(){return c(this,null,function*(){let e=M(Ue);yield this._writeOneToOneRel(e,"RelatingElement","RelatedElement","bot:adjacentElement")})}getStoreySpaceRelationships(){return c(this,null,function*(){yield this._writeOneToManyRel([ne],"RelatingObject","RelatedObjects","bot:hasSpace",[z],[te])})}getBuildingStoreyRelationships(){return c(this,null,function*(){yield this._writeOneToManyRel([ne],"RelatingObject","RelatedObjects","bot:hasStorey",[re],[z])})}getSiteBuildingRelationships(){return c(this,null,function*(){yield this._writeOneToManyRel([ne],"RelatingObject","RelatedObjects","bot:hasBuilding",[Ce],[re])})}_writeClasses(e,r){return c(this,null,function*(){let n=Object.values(this._properties).filter(i=>e.includes(i.type));for(let i of n){let a=yield C(i.GlobalId.value);this._writer.addQuad(h(a),h(le),h(r))}})}_getOneToOneRel(e,r,n){return Object.values(this._properties).filter(i=>e.includes(i.type)).filter(i=>i[r]?.value!==void 0).filter(i=>i[n]?.value!==void 0).map(i=>{let a=i[r].value,o=i[n].value;return{sourceId:a,targetId:o,relationshipItem:i}})}_writeOneToOneRel(e,r,n,i){return c(this,null,function*(){let a=this._getOneToOneRel(e,r,n);for(let o of a){let s=yield C(this._properties[o.sourceId].GlobalId.value),l=yield C(this._properties[o.targetId].GlobalId.value);if(this._writer.addQuad(h(s),h(i),h(l)),this._settings.includeInterfaces){let d=yield C(o.relationshipItem.GlobalId.value);this._writer.addQuad(h(d),h(le),h("bot:Interface")),this._writer.addQuad(h(d),h("bot:interfaceOf"),h(s)),this._writer.addQuad(h(d),h("bot:interfaceOf"),h(l))}}})}_writeOneToManyRel(e,r,n,i,a,o){return c(this,null,function*(){let s=Object.values(this._properties).filter(l=>e.includes(l.type)).filter(l=>l[r]!==void 0).filter(l=>l[n]!==void 0);for(let l of s){let d=l[r].value,u=l[n],g=this._properties[d];if(a!==void 0&&!a.includes(g.type))continue;let S=yield C(g.GlobalId.value);for(let m of u){let T=this._properties[m.value];if(o!==void 0&&!o.includes(T.type))continue;let y=yield C(T.GlobalId.value);if(this._writer.addQuad(h(S),h(i),h(y)),this._settings.includeInterfaces){let I=yield C(l.GlobalId.value);this._writer.addQuad(h(I),h(le),h("bot:Interface")),this._writer.addQuad(h(I),h("bot:interfaceOf"),h(S)),this._writer.addQuad(h(I),h("bot:interfaceOf"),h(y))}}}})}_writeOpeningFills(){return c(this,null,function*(){let e=this._getOneToOneRel([ke],"RelatingBuildingElement","RelatedOpeningElement"),r=this._getOneToOneRel([We],"RelatingOpeningElement","RelatedBuildingElement");for(let n of r){let i=n.sourceId,a=e.find(u=>u.targetId===i);if(a===void 0)continue;let o=a.targetId,s=n.sourceId,l=yield C(this._properties[o].GlobalId.value),d=yield C(this._properties[s].GlobalId.value);if(this._writer.addQuad(h(l),h("bot:hasSubElement"),h(d)),this._settings.includeInterfaces){let u=yield C(this._properties[i].GlobalId.value);this._writer.addQuad(h(u),h(le),h("bot:Interface")),this._writer.addQuad(h(u),h("bot:interfaceOf"),h(l)),this._writer.addQuad(h(u),h("bot:interfaceOf"),h(d))}}})}};var ct=(()=>{let e=class e extends A{constructor(n){super(n),this.enabled=!0,this._totalSteps=0,this._settings=new $,this._prefixes={ifc:v.ifc,rdfs:v.rdfs,inst:"https://web-bim/resources/"},this._writer=new F({prefixes:this._prefixes}),this._result="",this.events=new st.EventEmitter,this._fragmentManager=n.get(G),this._currentProgress=this._resetProgress()}get(){return e.uuid}setSettings(n){this._settings=n}setNamespace(n){this.addPrefix("inst",n)}addPrefix(n,i){this._prefixes[n]=i,this._writer=new F({prefixes:this._prefixes})}run(n){return c(this,null,function*(){n!==void 0&&(this._writer=n),this._t1=new Date().getTime();for(let i of this._fragmentManager.groups){this._currentProgress.step=0;let a=i[0],s=i[1].getLocalProperties();if(!s){console.error(`Fragments group ${a} doesn't have properties`);continue}let l=new de(this._writer,s,this._settings),d=[{message:"Getting sites",method:()=>c(this,null,function*(){yield l.getSites()})},{message:"Getting buildings",method:()=>c(this,null,function*(){yield l.getBuildings()})},{message:"Getting storeys",method:()=>c(this,null,function*(){yield l.getStoreys()})},{message:"Getting spaces",method:()=>c(this,null,function*(){yield l.getSpaces()})},{message:"Getting elements",method:()=>c(this,null,function*(){yield l.getElements()})},{message:"Getting spaces' adjacent elements",method:()=>c(this,null,function*(){yield l.getSpaceAdjacentElementRelationships()})},{message:"Getting spaces' contained elements",method:()=>c(this,null,function*(){yield l.getSpaceContainedElementRelationships()})},{message:"Getting storeys' elements",method:()=>c(this,null,function*(){yield l.getStoreyElementRelationships()})},{message:"Getting elements' hosted elements",method:()=>c(this,null,function*(){yield l.getSubElementRelationships()})},{message:"Getting elements' adjacent elements",method:()=>c(this,null,function*(){yield l.getAdjacentElementRelationships()})},{message:"Getting storeys' spaces",method:()=>c(this,null,function*(){yield l.getStoreySpaceRelationships()})},{message:"Getting buildings' storeys",method:()=>c(this,null,function*(){yield l.getBuildingStoreyRelationships()})},{message:"Getting site's buildings",method:()=>c(this,null,function*(){yield l.getSiteBuildingRelationships()})}];this._totalSteps=d.length;for(let u of d)this._currentProgress.message=u.message,yield u.method(),this._currentProgress.step++,this._emitProgress();this._currentProgress.model++}return new Promise((i,a)=>{n===void 0?this._writer.end((o,s)=>{o&&a(o),this._result=s,i()}):i()})})}downloadResult(n="fso.ttl"){_(this._result,n,"text/turtle")}_resetProgress(){return this._currentProgress={totalModels:this._fragmentManager.groups.size,model:0,totalSteps:this._totalSteps,step:0,timePassed:0},this._currentProgress}_emitProgress(){this._t1!==void 0&&(this._currentProgress.timePassed=new Date().getTime()-this._t1),this.events.emit("trackProgress",this._currentProgress)}};e.uuid="01e39ca8-fdf3-4b34-9445-aae6901ac224";let t=e;return t})();var Or=(()=>{let e=class e extends A{constructor(n){super(n),this.enabled=!0,this._settings=new ae,this._prefixes={ifc:v.ifc,fso:v.fso,beo:v.beo,bot:v.bot,fog:v.fog,omg:v.omg,rdfs:v.rdfs,inst:this._settings.namespace},this._writer=new F({prefixes:this._prefixes}),this._result="",this.events=new lt.EventEmitter,this._currentProgress=this._resetProgress()}get(){return e.uuid}dispose(){this.components.dispose()}setSettings(n){this._settings=n,this.addPrefix("inst",n.namespace)}setNamespace(n){this.addPrefix("inst",n)}get settings(){return this._settings}get result(){return this._result}addPrefix(n,i){this._prefixes[n]=i,this._writer=new F({prefixes:this._prefixes})}run(){return c(this,null,function*(){this._t1=new Date().getTime();for(let n of Object.keys(this._settings.enabledParsers)){if(!this._settings.enabledParsers[n])continue;let a;n==="products"&&(a=this.components.get(Ze)),n==="fso"&&(a=this.components.get(ot)),n==="bot"&&(a=this.components.get(ct)),a.events.addListener("trackProgress",s=>{this._currentProgress.message=s.message,this._currentProgress.products=s,this._emitProgress()});let o=this._settings.subSettings[n];a.setSettings(o),yield a.run(this._writer)}return new Promise((n,i)=>{this._writer.end((a,o)=>{a&&i(a),this._result=o,console.log("DONE"),n()})})})}downloadResult(n=this._settings.fileName){_(this._result,n,"text/turtle")}_emitProgress(){this._t1!==void 0&&(this._currentProgress.timePassed=new Date().getTime()-this._t1),this.events.emit("trackProgress",this._currentProgress)}_resetProgress(){return this._currentProgress={message:"",timePassed:0},this._currentProgress}};e.uuid="1f2ae346-a428-4923-aa93-780b42f6294e";let t=e;return t})();function ht(t){return t.arrayBuffer?t.arrayBuffer():new Promise((e,r)=>{let n=new FileReader;n.addEventListener("loadend",()=>{e(n.result)}),n.addEventListener("error",r),n.readAsArrayBuffer(t)})}function Ft(t){return c(this,null,function*(){let e=yield ht(t);return new Uint8Array(e)})}function gt(t){return typeof Blob<"u"&&t instanceof Blob}function K(t){return typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}var Dt=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function xt(t){return t.byteOffset===0&&t.byteLength===t.buffer.byteLength}var fe=class{constructor(e){this.typedArray=e instanceof ArrayBuffer||K(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}getLength(){return c(this,null,function*(){return this.typedArray.byteLength})}read(e,r){return c(this,null,function*(){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,r)})}},ue=class{constructor(e){this.blob=e}getLength(){return c(this,null,function*(){return this.blob.size})}read(e,r){return c(this,null,function*(){let n=this.blob.slice(e,e+r),i=yield ht(n);return new Uint8Array(i)})}sliceAsBlob(e,r,n=""){return c(this,null,function*(){return this.blob.slice(e,e+r,n)})}};function At(t,e){var r=Uint8Array;if(t[0]==3&&t[1]==0)return e||new r(0);var n=Bt,i=It,a=_t,o=yt,s=e==null;s&&(e=new r(t.length>>>2<<3));for(var l=0,d=0,u=0,g=0,S=0,m=0,T=0,y=0,I=0,x,B;l==0;){if(l=n(t,I,1),d=n(t,I+1,2),I+=3,d==0){I&7&&(I+=8-(I&7));var b=(I>>>3)+4,P=t[b-4]|t[b-3]<<8;s&&(e=Re(e,y+P)),e.set(new r(t.buffer,t.byteOffset+b,P),y),I=b+P<<3,y+=P;continue}if(s&&(e=Re(e,y+(1<<17))),d==1&&(x=f.flmap,B=f.fdmap,m=511,T=31),d==2){u=i(t,I,5)+257,g=i(t,I+5,5)+1,S=i(t,I+10,4)+4,I+=14;for(var w=0;w<38;w+=2)f.itree[w]=0,f.itree[w+1]=0;for(var D=1,w=0;w<S;w++){var pe=i(t,I+w*3,3);f.itree[(f.ordr[w]<<1)+1]=pe,pe>D&&(D=pe)}I+=3*S,q(f.itree,D),J(f.itree,D,f.imap),x=f.lmap,B=f.dmap,I=a(f.imap,(1<<D)-1,u+g,t,I,f.ttree);var he=dt(f.ttree,0,u,f.ltree);m=(1<<he)-1;var ge=dt(f.ttree,u,g,f.dtree);T=(1<<ge)-1,q(f.ltree,he),J(f.ltree,he,x),q(f.dtree,ge),J(f.dtree,ge,B)}for(;;){var Be=x[o(t,I)&m];I+=Be&15;var L=Be>>>4;if(!(L>>>8))e[y++]=L;else{if(L==256)break;var Ie=y+L-254;if(L>264){var ye=f.ldef[L-257];Ie=y+(ye>>>3)+i(t,I,ye&7),I+=ye&7}var Oe=B[o(t,I)&T];I+=Oe&15;var Et=Oe>>>4,Se=f.ddef[Et],X=(Se>>>4)+n(t,I,Se&15);for(I+=Se&15,s&&(e=Re(e,y+(1<<17)));y<Ie;)e[y]=e[y++-X],e[y]=e[y++-X],e[y]=e[y++-X],e[y]=e[y++-X];y=Ie}}}return e.length==y?e:e.slice(0,y)}function Re(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(Math.max(r<<1,e));return n.set(t,0),n}function _t(t,e,r,n,i,a){for(var o=It,s=yt,l=0;l<r;){var d=t[s(n,i)&e];i+=d&15;var u=d>>>4;if(u<=15)a[l]=u,l++;else{var g=0,S=0;u==16?(S=3+o(n,i,2),i+=2,g=a[l-1]):u==17?(S=3+o(n,i,3),i+=3):u==18&&(S=11+o(n,i,7),i+=7);for(var m=l+S;l<m;)a[l]=g,l++}}return i}function dt(t,e,r,n){for(var i=0,a=0,o=n.length>>>1;a<r;){var s=t[a+e];n[a<<1]=0,n[(a<<1)+1]=s,s>i&&(i=s),a++}for(;a<o;)n[a<<1]=0,n[(a<<1)+1]=0,a++;return i}function q(t,e){for(var r=t.length,n,i,a,o,s,l=f.bl_count,o=0;o<=e;o++)l[o]=0;for(o=1;o<r;o+=2)l[t[o]]++;var d=f.next_code;for(n=0,l[0]=0,i=1;i<=e;i++)n=n+l[i-1]<<1,d[i]=n;for(a=0;a<r;a+=2)s=t[a+1],s!=0&&(t[a]=d[s],d[s]++)}function J(t,e,r){for(var n=t.length,i=f.rev15,a=0;a<n;a+=2)if(t[a+1]!=0)for(var o=a>>1,s=t[a+1],l=o<<4|s,d=e-s,u=t[a]<<d,g=u+(1<<d);u!=g;){var S=i[u]>>>15-e;r[S]=l,u++}}function mt(t,e){for(var r=f.rev15,n=15-e,i=0;i<t.length;i+=2){var a=t[i]<<e-t[i+1];t[i]=r[a]>>>n}}function It(t,e,r){return(t[e>>>3]|t[(e>>>3)+1]<<8)>>>(e&7)&(1<<r)-1}function Bt(t,e,r){return(t[e>>>3]|t[(e>>>3)+1]<<8|t[(e>>>3)+2]<<16)>>>(e&7)&(1<<r)-1}function yt(t,e){return(t[e>>>3]|t[(e>>>3)+1]<<8|t[(e>>>3)+2]<<16)>>>(e&7)}var f=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}();(function(){for(var t=32768,e=0;e<t;e++){var r=e;r=(r&2863311530)>>>1|(r&1431655765)<<1,r=(r&3435973836)>>>2|(r&858993459)<<2,r=(r&4042322160)>>>4|(r&252645135)<<4,r=(r&4278255360)>>>8|(r&16711935)<<8,f.rev15[e]=(r>>>16|r<<16)>>>17}function n(i,a,o){for(;a--!=0;)i.push(0,o)}for(var e=0;e<32;e++)f.ldef[e]=f.of0[e]<<3|f.exb[e],f.ddef[e]=f.df0[e]<<4|f.dxb[e];n(f.fltree,144,8),n(f.fltree,112,9),n(f.fltree,24,7),n(f.fltree,8,8),q(f.fltree,9),J(f.fltree,9,f.flmap),mt(f.fltree,9),n(f.fdtree,32,5),q(f.fdtree,5),J(f.fdtree,5,f.fdmap),mt(f.fdtree,5),n(f.itree,19,0),n(f.ltree,286,0),n(f.dtree,30,0),n(f.ttree,320,0)})();var ft={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=ft.table[(t^e[r+i])&255]^t>>>8;return t},crc:function(t,e,r){return ft.update(4294967295,t,e,r)^4294967295}};function Ot(t,e){return At(t,e)}var Z={numWorkers:1,workerURL:"",useWorkers:!1},Mt=0,ut=0,De=!0,kt=[],me=[],H=[],xe=new Map;function Lt(t){St(t.target);let{id:e,error:r,data:n}=t.data,i=xe.get(e);xe.delete(e),r?i.reject(r):i.resolve(n)}function Pe(t){return new Promise((e,r)=>{let n=new Worker(t);n.onmessage=i=>{i.data==="start"?(n.onerror=void 0,n.onmessage=void 0,e(n)):r(new Error(`unexpected message: ${i.data}`))},n.onerror=r})}function Gt(t,e){return t.require?t.require(e):{}}var pt=function(){if(Dt){let e,{Worker:t}=Gt(module,"worker_threads");return{createWorker(r){return c(this,null,function*(){return new t(r)})},addEventListener(r,n){r.on("message",i=>{n({target:r,data:i})})},terminate(r){return c(this,null,function*(){yield r.terminate()})}}}else{let t;return{createWorker(e){return c(this,null,function*(){try{return yield Pe(e)}catch{console.warn("could not load worker:",e)}let r;try{let n=yield fetch(e,{mode:"cors"});if(!n.ok)throw new Error(`could not load: ${e}`);r=yield n.text(),e=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));let i=yield Pe(e);return Z.workerURL=e,i}catch{console.warn("could not load worker via fetch:",e)}if(r!==void 0)try{e=`data:application/javascript;base64,${btoa(r)}`;let n=yield Pe(e);return Z.workerURL=e,n}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")})},addEventListener(e,r){e.addEventListener("message",r)},terminate(e){return c(this,null,function*(){e.terminate()})}}}}();function St(t){me.push(t),Ct()}function Wt(){return c(this,null,function*(){if(me.length===0&&ut<Z.numWorkers){++ut;try{let t=yield pt.createWorker(Z.workerURL);kt.push(t),me.push(t),pt.addEventListener(t,Lt)}catch{De=!1}}return me.pop()})}function Nt(t,e,r,n){let i=new Uint8Array(e);Ot(t,i),n(r?new Blob([i],{type:r}):i.buffer)}function Ct(){return c(this,null,function*(){if(H.length!==0){if(Z.useWorkers&&De){let t=yield Wt();if(De){if(t){if(H.length===0){St(t);return}let{id:e,src:r,uncompressedSize:n,type:i,resolve:a,reject:o}=H.shift();xe.set(e,{id:e,resolve:a,reject:o});let s=[];t.postMessage({type:"inflate",data:{id:e,type:i,src:r,uncompressedSize:n}},s)}return}}for(;H.length;){let{src:t,uncompressedSize:e,type:r,resolve:n}=H.shift(),i=t;gt(t)&&(i=yield Ft(t)),Nt(i,e,r,n)}}})}function wt(t,e,r){return new Promise((n,i)=>{H.push({src:t,uncompressedSize:e,type:r,resolve:n,reject:i,id:Mt++}),Ct()})}function Ht(t,e){let r=t&31,n=(t>>5&15)-1,i=(t>>9&127)+1980,a=0,o=(e&31)*2,s=e>>5&63,l=e>>11&31;return new Date(i,n,r,l,s,o,a)}var Ae=class{constructor(e,r){this._reader=e,this._rawEntry=r,this.name=r.name,this.nameBytes=r.nameBytes,this.size=r.uncompressedSize,this.compressedSize=r.compressedSize,this.comment=r.comment,this.commentBytes=r.commentBytes,this.compressionMethod=r.compressionMethod,this.lastModDate=Ht(r.lastModFileDate,r.lastModFileTime),this.isDirectory=r.uncompressedSize===0&&r.name.endsWith("/"),this.encrypted=!!(r.generalPurposeBitFlag&1),this.externalFileAttributes=r.externalFileAttributes,this.versionMadeBy=r.versionMadeBy}blob(e="application/octet-stream"){return c(this,null,function*(){return yield Zt(this._reader,this._rawEntry,e)})}arrayBuffer(){return c(this,null,function*(){return yield Kt(this._reader,this._rawEntry)})}text(){return c(this,null,function*(){let e=yield this.arrayBuffer();return Y(new Uint8Array(e))})}json(){return c(this,null,function*(){let e=yield this.text();return JSON.parse(e)})}},Fe=22,Ut=65535,jt=101010256,zt=101075792;function U(t,e,r){return c(this,null,function*(){return yield t.read(e,r)})}function _e(t,e,r,n){return c(this,null,function*(){return t.sliceAsBlob?yield t.sliceAsBlob(e,r,n):yield t.read(e,r)})}var Vt={unsigned(){return 0}};function E(t,e){return t[e]+t[e+1]*256}function R(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216}function k(t,e){return R(t,e)+R(t,e+4)*4294967296}var Qt=new TextDecoder;function Y(t,e){return K(t.buffer)&&(t=new Uint8Array(t)),Qt.decode(t)}function $t(t,e){return c(this,null,function*(){let r=Math.min(Fe+Ut,e),n=e-r,i=yield U(t,n,r);for(let a=r-Fe;a>=0;--a){if(R(i,a)!==jt)continue;let o=new Uint8Array(i.buffer,i.byteOffset+a,i.byteLength-a),s=E(o,4);if(s!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${s}`);let l=E(o,10),d=R(o,12),u=R(o,16),g=E(o,20),S=o.length-Fe;if(g!==S)throw new Error(`invalid comment length. expected: ${S}, actual: ${g}`);let m=new Uint8Array(o.buffer,o.byteOffset+22,g),T=Y(m);return l===65535||u===4294967295?yield Jt(t,n+a,T,m):yield Tt(t,u,d,l,T,m)}throw new Error("could not find end of central directory. maybe not zip file")})}var qt=117853008;function Jt(t,e,r,n){return c(this,null,function*(){let i=e-20,a=yield U(t,i,20);if(R(a,0)!==qt)throw new Error("invalid zip64 end of central directory locator signature");let o=k(a,8),s=yield U(t,o,56);if(R(s,0)!==zt)throw new Error("invalid zip64 end of central directory record signature");let l=k(s,32),d=k(s,40),u=k(s,48);return Tt(t,u,d,l,r,n)})}var Yt=33639248;function Tt(t,e,r,n,i,a){return c(this,null,function*(){let o=0,s=yield U(t,e,r),l=[];for(let u=0;u<n;++u){let g=s.subarray(o,o+46),S=R(g,0);if(S!==Yt)throw new Error(`invalid central directory file header signature: 0x${S.toString(16)}`);let m={versionMadeBy:E(g,4),versionNeededToExtract:E(g,6),generalPurposeBitFlag:E(g,8),compressionMethod:E(g,10),lastModFileTime:E(g,12),lastModFileDate:E(g,14),crc32:R(g,16),compressedSize:R(g,20),uncompressedSize:R(g,24),fileNameLength:E(g,28),extraFieldLength:E(g,30),fileCommentLength:E(g,32),internalFileAttributes:E(g,36),externalFileAttributes:R(g,38),relativeOffsetOfLocalHeader:R(g,42)};if(m.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");o+=46;let T=s.subarray(o,o+m.fileNameLength+m.extraFieldLength+m.fileCommentLength);m.nameBytes=T.slice(0,m.fileNameLength),m.name=Y(m.nameBytes);let y=m.fileNameLength+m.extraFieldLength,I=T.slice(m.fileNameLength,y);m.extraFields=[];let x=0;for(;x<I.length-3;){let b=E(I,x+0),P=E(I,x+2),w=x+4,D=w+P;if(D>I.length)throw new Error("extra field length exceeds extra field buffer size");m.extraFields.push({id:b,data:I.slice(w,D)}),x=D}if(m.commentBytes=T.slice(y,y+m.fileCommentLength),m.comment=Y(m.commentBytes),o+=T.length,m.uncompressedSize===4294967295||m.compressedSize===4294967295||m.relativeOffsetOfLocalHeader===4294967295){let b=m.extraFields.find(D=>D.id===1);if(!b)throw new Error("expected zip64 extended information extra field");let P=b.data,w=0;if(m.uncompressedSize===4294967295){if(w+8>P.length)throw new Error("zip64 extended information extra field does not include uncompressed size");m.uncompressedSize=k(P,w),w+=8}if(m.compressedSize===4294967295){if(w+8>P.length)throw new Error("zip64 extended information extra field does not include compressed size");m.compressedSize=k(P,w),w+=8}if(m.relativeOffsetOfLocalHeader===4294967295){if(w+8>P.length)throw new Error("zip64 extended information extra field does not include relative header offset");m.relativeOffsetOfLocalHeader=k(P,w),w+=8}}let B=m.extraFields.find(b=>b.id===28789&&b.data.length>=6&&b.data[0]===1&&R(b.data,1),Vt.unsigned(m.nameBytes));if(B&&(m.fileName=Y(B.data.slice(5))),m.compressionMethod===0){let b=m.uncompressedSize;if(m.generalPurposeBitFlag&1&&(b+=12),m.compressedSize!==b)throw new Error(`compressed size mismatch for stored file: ${m.compressedSize} != ${b}`)}l.push(m)}return{zip:{comment:i,commentBytes:a},entries:l.map(u=>new Ae(t,u))}})}function bt(t,e){return c(this,null,function*(){if(e.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");let r=yield U(t,e.relativeOffsetOfLocalHeader,30),n=yield t.getLength(),i=R(r,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);let a=E(r,26),o=E(r,28),s=e.relativeOffsetOfLocalHeader+r.length+a+o,l;if(e.compressionMethod===0)l=!1;else if(e.compressionMethod===8)l=!0;else throw new Error(`unsupported compression method: ${e.compressionMethod}`);let d=s,u=d+e.compressedSize;if(e.compressedSize!==0&&u>n)throw new Error(`file data overflows file bounds: ${d} +  ${e.compressedSize}  > ${n}`);return{decompress:l,fileDataStart:d}})}function Kt(t,e){return c(this,null,function*(){let{decompress:r,fileDataStart:n}=yield bt(t,e);if(!r){let o=yield U(t,n,e.compressedSize);return xt(o)?o.buffer:o.slice().buffer}let i=yield _e(t,n,e.compressedSize);return yield wt(i,e.uncompressedSize)})}function Zt(t,e,r){return c(this,null,function*(){let{decompress:n,fileDataStart:i}=yield bt(t,e);if(!n){let s=yield _e(t,i,e.compressedSize,r);return gt(s)?s:new Blob([K(s.buffer)?new Uint8Array(s):s],{type:r})}let a=yield _e(t,i,e.compressedSize);return yield wt(a,e.uncompressedSize,r)})}function Xt(t){return c(this,null,function*(){let e;if(typeof Blob<"u"&&t instanceof Blob)e=new ue(t);else if(t instanceof ArrayBuffer||t&&t.buffer&&t.buffer instanceof ArrayBuffer)e=new fe(t);else if(K(t)||K(t.buffer))e=new fe(t);else if(typeof t=="string"){let n=yield fetch(t);if(!n.ok)throw new Error(`failed http request ${t}, status: ${n.status}: ${n.statusText}`);let i=yield n.blob();e=new ue(i)}else if(typeof t.getLength=="function"&&typeof t.read=="function")e=t;else throw new Error("unsupported source type");let r=yield e.getLength();if(r>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${r}. Only file sizes up 4503599627370496 bytes are supported`);return yield $t(e,r)})}function vt(t){return c(this,null,function*(){let{zip:e,entries:r}=yield Xt(t);return{zip:e,entries:Object.fromEntries(r.map(n=>[n.name,n]))}})}function Ur(n){return c(this,arguments,function*(t,e=[],r=[]){let a=yield(yield fetch(t)).blob(),s=yield(yield vt(a)).entries["geometryDefinition.json"].json();return e?.length&&(console.time("Filtered geometry definition"),yield ze(s,e,r),console.timeEnd("Filtered geometry definition")),s})}export{ae as a,Or as b,Ur as c};
