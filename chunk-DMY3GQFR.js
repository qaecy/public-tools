import{a as f}from"./chunk-L2HEPCHX.js";import{Ca as l,Da as u,_ as a,ea as c,f as h,ka as m}from"./chunk-NZYFJ7MV.js";import{h as d}from"./chunk-RZZ4GCVR.js";var _=d(f()),n=class t{constructor(){this._shortPressDuration=300,this._longPressDuration=1e3,this._emittedLongPress=!1,this.events=new _.EventEmitter,document.addEventListener("keydown",e=>{this._pressTime===void 0&&(this._pressTime=new Date().getTime(),this._pressTimer=setTimeout(()=>{this._handleLongPress(e.key),this._emittedLongPress=!0,clearTimeout(this._pressTimer)},this._longPressDuration),this.events.emit("holdingKey",e.key))}),document.addEventListener("keyup",e=>{if(this._pressTime===void 0)return;clearTimeout(this._pressTimer),this._pressTime-new Date().getTime()<this._shortPressDuration&&!this._emittedLongPress&&this._handleShortPress(e.key),this._reset(),this.events.emit("releasedKey",e.key)})}static getInstance(){return this._instance?this._instance:(this._instance=new t,this._instance)}_handleShortPress(e){e==="Escape"&&this.events.emit("shortPressedEsc"),this.events.emit("shortPressedKey",e)}_handleLongPress(e){e==="Escape"&&this.events.emit("longPressedEsc"),this.events.emit("longPressedKey",e)}_reset(){this._pressTime=void 0,this._emittedLongPress=!1}};var p=d(f()),o=class t{constructor(){this._shortPressDuration=200,this._emittedLongPress=!1,this._holdingControl=!1,this._keyPressHandler=n.getInstance(),this.events=new p.EventEmitter,this._keyPressHandler.events.addListener("holdingKey",e=>{this._holdingControl=e==="Control"}),this._keyPressHandler.events.addListener("releasedKey",e=>{e==="Control"&&(this._holdingControl=!1)}),document.addEventListener("mousedown",e=>{this._pressTime===void 0&&(this._pressTime=new Date().getTime(),this._pressTimer=setTimeout(()=>{this._handlePress(e,"long"),this._emittedLongPress=!0,clearTimeout(this._pressTimer)},this._shortPressDuration))}),document.addEventListener("mouseup",e=>{if(this._pressTime===void 0)return;clearTimeout(this._pressTimer),this._pressTime-new Date().getTime()<this._shortPressDuration&&!this._emittedLongPress&&this._handlePress(e,"short"),this._reset()})}static getInstance(){return this._instance?this._instance:(this._instance=new t,this._instance)}_handlePress(e,r){e.button===0&&!this._holdingControl&&this.events.emit(`${r}PressedLeft`,e),e.button===0&&this._holdingControl&&this.events.emit(`${r}PressedRight`,e),e.button===2&&this.events.emit(`${r}PressedRight`,e)}_reset(){this._pressTime=void 0,this._emittedLongPress=!1}};var g=(()=>{let e=class e{constructor(){this.clickedInsideSource=new h,this.clickedOutside$=new h,o.getInstance().events.addListener("shortPressedLeft",s=>{let i=this.elementRef?.nativeElement;if(i&&!i.contains(s.target)){if(s.target.classList.contains("clickoutside-ignore"))return;this.clickedOutside$.next()}})}registerElement(s){this.elementRef=s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $=(()=>{let e=class e{constructor(){this._clickOutsideService=c(g),this._elementRef=c(l),this.clickOutside=new u}ngOnInit(){this._clickOutsideService.clickedOutside$.subscribe(()=>this.clickOutside.emit()),this._clickOutsideService.registerElement(this._elementRef)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=m({type:e,selectors:[["","libClickOutside",""]],outputs:{clickOutside:"clickOutside"},standalone:!0});let t=e;return t})();export{n as a,o as b,$ as c};
